<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ˜Ÿåº§å ã„ - ã‚ãªãŸã®ä»Šæ—¥ã®é‹å‹¢</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', 'Yu Gothic Medium', 'Meiryo', sans-serif;
            background: linear-gradient(135deg, #F5E6E8 0%, #E8C4C4 50%, #D4A5A5 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .star {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInDown 1s ease-out;
        }

        .title {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            color: #8B4B6B;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            font-weight: 400;
            letter-spacing: 2px;
        }

        .subtitle {
            font-size: 1.1rem;
            color: #A0657A;
            font-weight: 300;
        }

        .card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(212, 165, 165, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            animation: fadeInUp 1s ease-out;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            font-size: 1.1rem;
            color: #8B4B6B;
            margin-bottom: 10px;
            font-weight: 500;
        }

        .form-row {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .form-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #E8C4C4;
            border-radius: 15px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
        }

        .form-input:focus {
            outline: none;
            border-color: #D4A5A5;
            box-shadow: 0 0 20px rgba(212, 165, 165, 0.3);
            transform: translateY(-2px);
        }

        .form-select {
            padding: 15px 20px;
            border: 2px solid #E8C4C4;
            border-radius: 15px;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.9);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .form-select:focus {
            outline: none;
            border-color: #D4A5A5;
            box-shadow: 0 0 20px rgba(212, 165, 165, 0.3);
        }

        .btn {
            background: linear-gradient(135deg, #D4A5A5 0%, #C89999 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(212, 165, 165, 0.4);
            font-weight: 500;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(212, 165, 165, 0.6);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .result-card {
            display: none;
            animation: fadeInUp 1s ease-out;
        }

        .zodiac-symbol {
            font-size: 4rem;
            text-align: center;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .zodiac-name {
            font-size: 2rem;
            color: #8B4B6B;
            text-align: center;
            margin-bottom: 30px;
            font-weight: 300;
        }

        .fortune-section {
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(248, 240, 242, 0.7);
            border-radius: 15px;
            border-left: 5px solid #D4A5A5;
        }

        .fortune-title {
            font-family: 'Crimson Text', serif;
            font-size: 1.2rem;
            color: #8B4B6B;
            margin-bottom: 10px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .fortune-content {
            color: #6B4C57;
            line-height: 1.8;
            font-size: 1rem;
        }

        .lucky-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .lucky-item {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(212, 165, 165, 0.2);
        }

        .lucky-label {
            font-size: 0.9rem;
            color: #A0657A;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .lucky-value {
            font-size: 1.3rem;
            color: #8B4B6B;
            font-weight: 600;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #A0657A;
            font-size: 1.1rem;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #E8C4C4;
            border-top: 4px solid #D4A5A5;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .api-key-section {
            background: rgba(255, 248, 220, 0.9);
            border: 2px solid #E8C4C4;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .api-key-title {
            color: #8B4B6B;
            font-size: 1.1rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .api-key-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #E8C4C4;
            border-radius: 10px;
            font-size: 0.95rem;
            background: rgba(255, 255, 255, 0.9);
        }

        .api-key-note {
            font-size: 0.85rem;
            color: #A0657A;
            margin-top: 10px;
            line-height: 1.5;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .title {
                font-size: 2rem;
            }
            
            .card {
                padding: 25px;
                margin-bottom: 20px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 10px;
            }
            
            .lucky-info {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
        }

        @media (max-width: 480px) {
            .title {
                font-size: 1.8rem;
            }
            
            .card {
                padding: 20px;
            }
            
            .lucky-info {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <div class="header">
            <h1 class="title">âœ¨ æ˜Ÿåº§å ã„ & æ•°ç§˜è¡“ âœ¨</h1>
            <p class="subtitle">å¤©ä½“ã®å‹•ãã¨æ•°ç§˜ã‹ã‚‰ã‚ãªãŸã®é‹å‹¢ã¨æ€§æ ¼ã‚’ç·åˆçš„ã«èª­ã¿è§£ãã¾ã™</p>
        </div>

        <div class="card">
            <form id="fortuneForm">
                <div class="form-group">
                    <label class="form-label">ğŸ“… å®Œå…¨ãªç”Ÿå¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</label>
                    <div class="form-row">
                        <input type="number" id="year" class="form-input" placeholder="å¹´ (ä¾‹: 1990)" min="1900" max="2025" required>
                        <select id="month" class="form-select" required>
                            <option value="">æœˆã‚’é¸æŠ</option>
                            <option value="1">1æœˆ</option>
                            <option value="2">2æœˆ</option>
                            <option value="3">3æœˆ</option>
                            <option value="4">4æœˆ</option>
                            <option value="5">5æœˆ</option>
                            <option value="6">6æœˆ</option>
                            <option value="7">7æœˆ</option>
                            <option value="8">8æœˆ</option>
                            <option value="9">9æœˆ</option>
                            <option value="10">10æœˆ</option>
                            <option value="11">11æœˆ</option>
                            <option value="12">12æœˆ</option>
                        </select>
                        <select id="day" class="form-select" required>
                            <option value="">æ—¥ã‚’é¸æŠ</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">ğŸ• å‡ºç”Ÿæ™‚åˆ»ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆåˆ†ã‹ã‚‰ãªã„å ´åˆã¯12:00ã§OKï¼‰</label>
                    <div class="form-row">
                        <select id="hour" class="form-select" required>
                            <option value="">æ™‚ã‚’é¸æŠ</option>
                        </select>
                        <select id="minute" class="form-select" required>
                            <option value="">åˆ†ã‚’é¸æŠ</option>
                        </select>
                    </div>
                </div>

                <div style="text-align: center;">
                    <button type="submit" class="btn">ğŸŒŸ å¤©ä½“ä½ç½®ã‚’èª¿ã¹ã¦å ã† ğŸŒŸ</button>
                </div>
            </form>
        </div>

        <div id="loadingCard" class="card loading" style="display: none;">
            <div class="spinner"></div>
            <p>å¤©ä½“ã®ä½ç½®ã‚’è¨ˆç®—ä¸­...<br>å®‡å®™ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ä¿¡ã—ã¦ã„ã¾ã™âœ¨</p>
        </div>

        <div id="resultCard" class="card result-card">
            <div id="zodiacSymbol" class="zodiac-symbol"></div>
            <div id="zodiacName" class="zodiac-name"></div>
            
            <div style="text-align: center; margin-bottom: 20px; padding: 15px; background: rgba(248, 240, 242, 0.5); border-radius: 10px;">
                <div style="font-size: 0.9rem; color: #8B4B6B; font-style: italic;">
                    âœ¨ å¤©ä½“ã®å‹•ãã¨æ•°ç§˜è¡“ã§ã‚ãªãŸã‚’ç·åˆçš„ã«åˆ†æã—ã¦ã„ã¾ã™ âœ¨
                </div>
            </div>

            <div class="fortune-section">
                <div class="fortune-title">ğŸŒŸ ä»Šæ—¥ã®ç·åˆé‹å‹¢</div>
                <div id="overallFortune" class="fortune-content"></div>
            </div>

            <div class="fortune-section">
                <div class="fortune-title">ğŸ’• æ‹æ„›é‹</div>
                <div id="loveFortune" class="fortune-content"></div>
            </div>

            <div class="fortune-section">
                <div class="fortune-title">ğŸ’¼ ä»•äº‹é‹ãƒ»é‡‘é‹</div>
                <div id="workFortune" class="fortune-content"></div>
            </div>

            <div class="fortune-section">
                <div class="fortune-title">ğŸŒ¿ å¥åº·é‹</div>
                <div id="healthFortune" class="fortune-content"></div>
            </div>

            <div class="lucky-info">
                <div class="lucky-item">
                    <div class="lucky-label">ğŸ¨ ãƒ©ãƒƒã‚­ãƒ¼ã‚«ãƒ©ãƒ¼</div>
                    <div id="luckyColor" class="lucky-value"></div>
                </div>
                <div class="lucky-item">
                    <div class="lucky-label">ğŸ”¢ ãƒ©ãƒƒã‚­ãƒ¼ãƒŠãƒ³ãƒãƒ¼</div>
                    <div id="luckyNumber" class="lucky-value"></div>
                </div>
            </div>

            <div class="fortune-section">
                <div class="fortune-title">ğŸ’Œ ä»Šæ—¥ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹</div>
                <div id="advice" class="fortune-content"></div>
            </div>

            <!-- æ•°ç§˜è¡“ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="fortune-section" style="background: linear-gradient(135deg, rgba(255, 240, 245, 0.8), rgba(255, 228, 225, 0.8)); border-left: 5px solid #E8A4C4;">
                <div class="fortune-title">ğŸ”¢ æ•°ç§˜è¡“ã‹ã‚‰ã®æ´å¯Ÿ</div>
                
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #8B4B6B; margin-bottom: 10px;">ğŸ“‹ ã‚ãªãŸã®åŸºæœ¬æ€§æ ¼ (ãƒ©ã‚¤ãƒ•ãƒ‘ã‚¹: <span id="lifePathNumber"></span>)</h4>
                    <div id="personalityDescription" class="fortune-content" style="font-size: 0.95rem;"></div>
                    <div style="margin-top: 8px; font-size: 0.9rem;">
                        <strong style="color: #A0657A;">å¼·ã¿:</strong> <span id="personalityStrengths"></span><br>
                        <strong style="color: #A0657A;">èª²é¡Œ:</strong> <span id="personalityChallenges"></span>
                    </div>
                </div>

                <div style="margin-bottom: 15px;">
                    <h4 style="color: #8B4B6B; margin-bottom: 8px;">ğŸ“… ä»Šæ—¥ã®æ•°ç§˜ (ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ãƒ‡ã‚¤: <span id="personalDayNumber"></span>)</h4>
                    <div id="personalDayMessage" class="fortune-content" style="font-size: 0.95rem;"></div>
                </div>

                <div style="margin-bottom: 15px;">
                    <h4 style="color: #8B4B6B; margin-bottom: 8px;">ğŸ—“ï¸ ä»Šæœˆã®æ•°ç§˜ (ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ãƒãƒ³ã‚¹: <span id="personalMonthNumber"></span>)</h4>
                    <div id="personalMonthMessage" class="fortune-content" style="font-size: 0.95rem;"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ˜Ÿåº§ã®åŸºæœ¬ãƒ‡ãƒ¼ã‚¿
        const zodiacData = {
            'ãŠã²ã¤ã˜åº§': { symbol: 'â™ˆ', dates: [[3, 21], [4, 19]] },
            'ãŠã†ã—åº§': { symbol: 'â™‰', dates: [[4, 20], [5, 20]] },
            'ãµãŸã”åº§': { symbol: 'â™Š', dates: [[5, 21], [6, 21]] },
            'ã‹ã«åº§': { symbol: 'â™‹', dates: [[6, 22], [7, 22]] },
            'ã—ã—åº§': { symbol: 'â™Œ', dates: [[7, 23], [8, 22]] },
            'ãŠã¨ã‚åº§': { symbol: 'â™', dates: [[8, 23], [9, 22]] },
            'ã¦ã‚“ã³ã‚“åº§': { symbol: 'â™', dates: [[9, 23], [10, 23]] },
            'ã•ãã‚Šåº§': { symbol: 'â™', dates: [[10, 24], [11, 22]] },
            'ã„ã¦åº§': { symbol: 'â™', dates: [[11, 23], [12, 21]] },
            'ã‚„ãåº§': { symbol: 'â™‘', dates: [[12, 22], [12, 31]], extra: [[1, 1], [1, 19]] },
            'ã¿ãšãŒã‚åº§': { symbol: 'â™’', dates: [[1, 20], [2, 18]] },
            'ã†ãŠåº§': { symbol: 'â™“', dates: [[2, 19], [3, 20]] }
        };

        // å æ˜Ÿè¡“è§£é‡ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
        const astroInterpretations = {
            // å¤ªé™½ã®æ˜Ÿåº§åˆ¥è§£é‡ˆï¼ˆç·åˆé‹å‹¢ï¼‰
            sun: {
                'ç‰¡ç¾Šåº§': 'ç©æ¥µçš„ã§è¡Œå‹•åŠ›ã«æº€ã¡ãŸã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒå¼·ãã€æ–°ã—ã„ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã«å‘ã„ãŸæ™‚æœŸã§ã™ã€‚',
                'ç‰¡ç‰›åº§': 'å®‰å®šã‚’æ±‚ã‚ã‚‹æ°—æŒã¡ãŒé«˜ã¾ã‚Šã€ç¢ºå®Ÿãªæˆæœã‚’æ±‚ã‚ã‚‹å‚¾å‘ã«ã‚ã‚Šã¾ã™ã€‚',
                'åŒå­åº§': 'ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³èƒ½åŠ›ãŒæ´»ç™ºã«ãªã‚Šã€å¤šæ–¹é¢ã§ã®æ´»å‹•ãŒæœŸå¾…ã§ãã¾ã™ã€‚',
                'èŸ¹åº§': 'æ„Ÿæƒ…çš„ãªæ·±ã•ã¨å®¶åº­çš„ãªæ¸©ã‹ã•ãŒå¼·èª¿ã•ã‚Œã‚‹æ™‚æœŸã§ã™ã€‚',
                'ç…å­åº§': 'è‡ªå·±è¡¨ç¾åŠ›ã¨å‰µé€ æ€§ãŒé«˜ã¾ã‚Šã€æ³¨ç›®ã‚’é›†ã‚ã‚„ã™ã„æ™‚ã§ã™ã€‚',
                'ä¹™å¥³åº§': 'ç´°ã‹ã„ä½œæ¥­ã‚„åˆ†æçš„ãªæ€è€ƒãŒå¾—æ„ã«ãªã‚‹å®Ÿå‹™çš„ãªæ™‚æœŸã§ã™ã€‚',
                'å¤©ç§¤åº§': 'ãƒãƒ©ãƒ³ã‚¹æ„Ÿè¦šã¨ç¾çš„ã‚»ãƒ³ã‚¹ãŒå…‰ã‚Šã€èª¿å’Œã‚’é‡è¦–ã™ã‚‹æ™‚æœŸã§ã™ã€‚',
                'è åº§': 'æ·±ã„æ´å¯ŸåŠ›ã¨é›†ä¸­åŠ›ãŒå¢—ã—ã€æœ¬è³ªã‚’è¦‹æŠœãåŠ›ãŒå¼·ã¾ã‚Šã¾ã™ã€‚',
                'å°„æ‰‹åº§': 'å†’é™ºå¿ƒã¨å­¦ç¿’æ„æ¬²ãŒé«˜ã¾ã‚Šã€è¦–é‡ã‚’åºƒã’ã‚‹çµ¶å¥½ã®æ©Ÿä¼šã§ã™ã€‚',
                'å±±ç¾Šåº§': 'è²¬ä»»æ„Ÿã¨ç›®æ¨™é”æˆã¸ã®æ„è­˜ãŒå¼·ã¾ã‚‹å®Ÿè·µçš„ãªæ™‚æœŸã§ã™ã€‚',
                'æ°´ç“¶åº§': 'ç‹¬å‰µæ€§ã¨é©æ–°çš„ãªã‚¢ã‚¤ãƒ‡ã‚¢ãŒæ¹§ãå‡ºã‚‹å‰µé€ çš„ãªæ™‚æœŸã§ã™ã€‚',
                'é­šåº§': 'ç›´æ„ŸåŠ›ã¨èŠ¸è¡“çš„æ„Ÿæ€§ãŒé«˜ã¾ã‚‹æ„Ÿå—æ€§è±Šã‹ãªæ™‚æœŸã§ã™ã€‚'
            },
            // é‡‘æ˜Ÿã®æ˜Ÿåº§åˆ¥è§£é‡ˆï¼ˆæ‹æ„›é‹ï¼‰
            venus: {
                'ç‰¡ç¾Šåº§': 'æƒ…ç†±çš„ã§ç©æ¥µçš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒæ‹æ„›ã«åŠ¹æœçš„ã€‚æ–°ã—ã„å‡ºä¼šã„ã«ã‚‚æœŸå¾…å¤§ã§ã™ã€‚',
                'ç‰¡ç‰›åº§': 'å®‰å®šã—ãŸæ„›æƒ…é–¢ä¿‚ã‚’ç¯‰ãã‚„ã™ãã€äº”æ„Ÿã‚’ä½¿ã£ãŸæ„›ã®è¡¨ç¾ãŒå°è±¡çš„ã§ã™ã€‚',
                'åŒå­åº§': 'çŸ¥çš„ãªä¼šè©±ã‚„è»½ã‚„ã‹ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ‹æ„›ã®éµã¨ãªã‚Šã¾ã™ã€‚',
                'èŸ¹åº§': 'å®¶åº­çš„ã§åŒ…å®¹åŠ›ã®ã‚ã‚‹æ„›æƒ…ãŒç›¸æ‰‹ã®å¿ƒã‚’æ¸©ã‚ã€æ·±ã„çµ†ã‚’ç¯‰ã‘ã¾ã™ã€‚',
                'ç…å­åº§': 'è¯ã‚„ã‹ã§é­…åŠ›çš„ãªè‡ªå·±è¡¨ç¾ãŒæ‹æ„›é‹ã‚’é«˜ã‚ã‚‹æ™‚æœŸã§ã™ã€‚',
                'ä¹™å¥³åº§': 'èª å®Ÿã§ç´°ã‚„ã‹ãªæ°—é…ã‚ŠãŒç›¸æ‰‹ã«å¥½å°è±¡ã‚’ä¸ãˆã‚‹ç©ã‚„ã‹ãªæ‹æ„›æœŸã§ã™ã€‚',
                'å¤©ç§¤åº§': 'ä¸Šå“ã§æ´—ç·´ã•ã‚ŒãŸé­…åŠ›ãŒè¼ãã€ç¾ã—ã„ã‚‚ã®ã‚’å…±æœ‰ã™ã‚‹æ‹æ„›ãŒç†æƒ³çš„ã§ã™ã€‚',
                'è åº§': 'æ·±ãæƒ…ç†±çš„ãªæ„›æƒ…ã§ç›¸æ‰‹ã‚’é­…äº†ã—ã€é‹å‘½çš„ãªå‡ºä¼šã„ã®å¯èƒ½æ€§ã‚‚ã‚ã‚Šã¾ã™ã€‚',
                'å°„æ‰‹åº§': 'è‡ªç”±ã§é–‹æ”¾çš„ãªé–¢ä¿‚æ€§ã‚’å¥½ã¿ã€ä¸€ç·’ã«å†’é™ºã§ãã‚‹ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¨ã®ç¸ãŒæ·±ã¾ã‚Šã¾ã™ã€‚',
                'å±±ç¾Šåº§': 'çœŸé¢ç›®ã§é•·æœŸçš„ãªè¦–ç‚¹ã§ã®æ‹æ„›é–¢ä¿‚ã‚’ç¯‰ãã‚„ã™ã„å®‰å®šæœŸã§ã™ã€‚',
                'æ°´ç“¶åº§': 'ãƒ¦ãƒ‹ãƒ¼ã‚¯ã§å‹é”ã®ã‚ˆã†ãªé–¢ä¿‚ã‹ã‚‰å§‹ã¾ã‚‹æ‹æ„›ã«ç™ºå±•ã—ã‚„ã™ã„æ™‚æœŸã§ã™ã€‚',
                'é­šåº§': 'ãƒ­ãƒãƒ³ãƒãƒƒã‚¯ã§å¤¢è¦‹ãŒã¡ãªæ‹æ„›è¦³ãŒå¼·ã¾ã‚Šã€ç†æƒ³çš„ãªæ„›ã‚’æ±‚ã‚ã‚‹å‚¾å‘ã«ã‚ã‚Šã¾ã™ã€‚'
            },
            // ç«æ˜Ÿã®æ˜Ÿåº§åˆ¥è§£é‡ˆï¼ˆä»•äº‹é‹ãƒ»è¡Œå‹•åŠ›ï¼‰
            mars: {
                'ç‰¡ç¾Šåº§': 'è¡Œå‹•åŠ›ã¨æ±ºæ–­åŠ›ãŒæœ€é«˜æ½®ã«é”ã—ã€ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚’ç™ºæ®ã§ãã‚‹æ™‚æœŸã§ã™ã€‚',
                'ç‰¡ç‰›åº§': 'ç€å®Ÿã§ç²˜ã‚Šå¼·ã„åŠªåŠ›ãŒå®Ÿã‚’çµã³ã€ç¢ºå®Ÿãªæˆæœã‚’ä¸Šã’ã‚‰ã‚Œã¾ã™ã€‚',
                'åŒå­åº§': 'å¤šæ–¹é¢ã§ã®æ´»å‹•ã‚„æƒ…å ±åé›†èƒ½åŠ›ãŒä»•äº‹ã«æ´»ã‹ã•ã‚Œã‚‹æ™‚æœŸã§ã™ã€‚',
                'èŸ¹åº§': 'ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’å¤§åˆ‡ã«ã—ã€äººã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹èƒ½åŠ›ãŒè©•ä¾¡ã•ã‚Œã¾ã™ã€‚',
                'ç…å­åº§': 'å‰µé€ çš„ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„è¡¨ç¾åŠ›ã‚’æ´»ã‹ã—ãŸä»•äº‹ã§åŠ›ã‚’ç™ºæ®ã—ã¾ã™ã€‚',
                'ä¹™å¥³åº§': 'åˆ†æåŠ›ã¨å®Œç’§ä¸»ç¾©çš„ãªå–ã‚Šçµ„ã¿ãŒè·å ´ã§é‡å®ã•ã‚Œã‚‹æ™‚æœŸã§ã™ã€‚',
                'å¤©ç§¤åº§': 'èª¿æ•´èƒ½åŠ›ã¨ç¾çš„ã‚»ãƒ³ã‚¹ã‚’æ´»ã‹ã—ãŸä»•äº‹ã§æˆåŠŸã‚’åã‚ã‚‰ã‚Œã¾ã™ã€‚',
                'è åº§': 'é›†ä¸­åŠ›ã¨æ¢ç©¶å¿ƒã‚’æ´»ã‹ã—ã€æ·±ãæ˜ã‚Šä¸‹ã’ã‚‹ç ”ç©¶çš„ãªä»•äº‹ã«å‘ã„ã¦ã„ã¾ã™ã€‚',
                'å°„æ‰‹åº§': 'å›½éš›çš„ãªè¦–é‡ã‚„æ•™è‚²çš„ãªåˆ†é‡ã§ã®æ´»å‹•ãŒæ´»ç™ºã«ãªã‚‹æ™‚æœŸã§ã™ã€‚',
                'å±±ç¾Šåº§': 'çµ„ç¹”ã§ã®åœ°ä½å‘ä¸Šã‚„é•·æœŸçš„ãªã‚­ãƒ£ãƒªã‚¢æ§‹ç¯‰ã«æœ€é©ãªæ™‚æœŸã§ã™ã€‚',
                'æ°´ç“¶åº§': 'é©æ–°çš„ãªã‚¢ã‚¤ãƒ‡ã‚¢ã‚„ãƒãƒ¼ãƒ ã§ã®å”åƒãŒä»•äº‹ã®æˆåŠŸã«ã¤ãªãŒã‚Šã¾ã™ã€‚',
                'é­šåº§': 'ç›´æ„ŸåŠ›ã‚’æ´»ã‹ã—ãŸå‰µä½œæ´»å‹•ã‚„ã‚µãƒ¼ãƒ“ã‚¹æ¥­ã§èƒ½åŠ›ã‚’ç™ºæ®ã§ãã¾ã™ã€‚'
            },
            // æœˆã®æ˜Ÿåº§åˆ¥è§£é‡ˆï¼ˆå¥åº·é‹ãƒ»å†…é¢ï¼‰
            moon: {
                'ç‰¡ç¾Šåº§': 'æ´»åŠ›ã«æº€ã¡ã¦ã„ã¾ã™ãŒã€é ­éƒ¨ã‚„ç›®ã®ç–²ã‚Œã«æ³¨æ„ã€‚é©åº¦ãªä¼‘æ¯ã‚’å¿ƒãŒã‘ã¦ã€‚',
                'ç‰¡ç‰›åº§': 'ä½“èª¿ã¯å®‰å®šã—ã¦ã„ã¾ã™ãŒã€é¦–ã‚„å–‰ã®ä¸èª¿ã«æ°—ã‚’ä»˜ã‘ã¾ã—ã‚‡ã†ã€‚',
                'åŒå­åº§': 'ç¥çµŒãŒæ•æ„Ÿã«ãªã‚ŠãŒã¡ã€‚å‘¼å¸å™¨ç³»ã®å¥åº·ã¨ååˆ†ãªç¡çœ ãŒå¤§åˆ‡ã§ã™ã€‚',
                'èŸ¹åº§': 'æ¶ˆåŒ–å™¨ç³»ã®èª¿å­ã«æ³¢ãŒã‚ã‚Šã¾ã™ã€‚é£Ÿäº‹ã®ãƒãƒ©ãƒ³ã‚¹ã¨æ°´åˆ†è£œçµ¦ã‚’æ„è­˜ã—ã¦ã€‚',
                'ç…å­åº§': 'å¿ƒè‡“ã‚„èƒŒä¸­ã®å¥åº·ã«æ³¨æ„ã€‚è¦å‰‡æ­£ã—ã„ç”Ÿæ´»ãƒªã‚ºãƒ ãŒé‡è¦ã§ã™ã€‚',
                'ä¹™å¥³åº§': 'è…¸ã®å¥åº·ã‚’æ„è­˜ã—ãŸé£Ÿç”Ÿæ´»ã‚’ã€‚å®Œç’§ä¸»ç¾©ã«ã‚ˆã‚‹ã‚¹ãƒˆãƒ¬ã‚¹ã«ã‚‚æ³¨æ„ãŒå¿…è¦ã€‚',
                'å¤©ç§¤åº§': 'è…è‡“ã‚„è‚Œã®èª¿å­ã«æ°—ã‚’é…ã£ã¦ã€‚ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸç”Ÿæ´»ã‚’å¿ƒãŒã‘ã¾ã—ã‚‡ã†ã€‚',
                'è åº§': 'ç”Ÿæ®–å™¨ç³»ã‚„å…ç–«åŠ›ã«æ³¨æ„ã€‚ãƒ‡ãƒˆãƒƒã‚¯ã‚¹ã‚’æ„è­˜ã—ãŸç”Ÿæ´»ãŒåŠ¹æœçš„ã§ã™ã€‚',
                'å°„æ‰‹åº§': 'è¶³è…°ã®å¥åº·ã¨è‚è‡“ã®åƒãã«æ³¨æ„ã€‚é©åº¦ãªé‹å‹•ã§ä½“åŠ›ç¶­æŒã‚’ã€‚',
                'å±±ç¾Šåº§': 'éª¨ã‚„é–¢ç¯€ã€æ­¯ã®å¥åº·ç®¡ç†ãŒé‡è¦ã€‚ã‚«ãƒ«ã‚·ã‚¦ãƒ ã®æ‘‚å–ã‚’æ„è­˜ã—ã¦ã€‚',
                'æ°´ç“¶åº§': 'è¡€è¡Œä¿ƒé€²ã¨è¶³é¦–ã®å¥åº·ã«æ³¨æ„ã€‚æ–°ã—ã„å¥åº·æ³•ã‚’è©¦ã™ã®ã‚‚è‰¯ã„ã§ã—ã‚‡ã†ã€‚',
                'é­šåº§': 'è¶³ã‚„å…ç–«ç³»ã®å¥åº·ã«æ°—ã‚’ä»˜ã‘ã¦ã€‚å¿ƒã®å¥åº·ã‚‚åŒã˜ã‚ˆã†ã«å¤§åˆ‡ã«ã—ã¾ã—ã‚‡ã†ã€‚'
            }
        };

        // æ•°ç§˜è¡“ã‚·ã‚¹ãƒ†ãƒ 
        const numerologySystem = {
            // ãƒ©ã‚¤ãƒ•ãƒ‘ã‚¹ãƒŠãƒ³ãƒãƒ¼ã®è¨ˆç®—
            calculateLifePath: function(birthDate) {
                const year = birthDate.getFullYear();
                const month = birthDate.getMonth() + 1;
                const day = birthDate.getDate();
                
                // å„è¦ç´ ã‚’ä¸€æ¡ã«ãªã‚‹ã¾ã§è¶³ã—åˆã‚ã›ã‚‹
                const sumDigits = (num) => {
                    while (num > 9 && num !== 11 && num !== 22 && num !== 33) {
                        num = String(num).split('').reduce((sum, digit) => sum + parseInt(digit), 0);
                    }
                    return num;
                };
                
                const yearSum = sumDigits(year);
                const monthSum = sumDigits(month);
                const daySum = sumDigits(day);
                
                return sumDigits(yearSum + monthSum + daySum);
            },
            
            // ãƒ‡ã‚£ã‚¹ãƒ†ã‚£ãƒ‹ãƒ¼ãƒŠãƒ³ãƒãƒ¼ï¼ˆé‹å‘½æ•°ï¼‰ã®è¨ˆç®—ï¼ˆãƒ•ãƒ«ãƒãƒ¼ãƒ ï¼‰
            calculateDestiny: function(birthDate) {
                // ç”Ÿå¹´æœˆæ—¥ã‹ã‚‰ç°¡æ˜“çš„ã«ç®—å‡º
                const sum = birthDate.getFullYear() + (birthDate.getMonth() + 1) + birthDate.getDate();
                return this.reduceToSingle(sum);
            },
            
            // ã‚½ã‚¦ãƒ«ãƒŠãƒ³ãƒãƒ¼ã®è¨ˆç®—ï¼ˆå†…é¢ã®æ¬²æ±‚ï¼‰
            calculateSoul: function(birthDate) {
                // æ™‚åˆ»ã‚’ä½¿ç”¨ã—ã¦ã‚½ã‚¦ãƒ«ãƒŠãƒ³ãƒãƒ¼ã‚’ç®—å‡º
                const hour = birthDate.getHours();
                const minute = birthDate.getMinutes();
                const sum = hour + minute + birthDate.getDate();
                return this.reduceToSingle(sum);
            },
            
            // ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ã‚¤ãƒ¤ãƒ¼ãƒŠãƒ³ãƒãƒ¼ï¼ˆä»Šå¹´ã®é‹å‹¢ï¼‰
            calculatePersonalYear: function(birthDate, currentYear = new Date().getFullYear()) {
                const month = birthDate.getMonth() + 1;
                const day = birthDate.getDate();
                const sum = month + day + this.reduceToSingle(currentYear);
                return this.reduceToSingle(sum);
            },
            
            // ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ãƒãƒ³ã‚¹ãƒŠãƒ³ãƒãƒ¼ï¼ˆä»Šæœˆã®é‹å‹¢ï¼‰
            calculatePersonalMonth: function(birthDate, currentDate = new Date()) {
                const personalYear = this.calculatePersonalYear(birthDate, currentDate.getFullYear());
                const currentMonth = currentDate.getMonth() + 1;
                return this.reduceToSingle(personalYear + currentMonth);
            },
            
            // ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ãƒ‡ã‚¤ãƒŠãƒ³ãƒãƒ¼ï¼ˆä»Šæ—¥ã®é‹å‹¢ï¼‰
            calculatePersonalDay: function(birthDate, currentDate = new Date()) {
                const personalMonth = this.calculatePersonalMonth(birthDate, currentDate);
                const currentDay = currentDate.getDate();
                return this.reduceToSingle(personalMonth + currentDay);
            },
            
            // æ•°å­—ã‚’ä¸€æ¡ã«é‚„å…ƒ
            reduceToSingle: function(num) {
                while (num > 9 && num !== 11 && num !== 22 && num !== 33) {
                    num = String(num).split('').reduce((sum, digit) => sum + parseInt(digit), 0);
                }
                return num;
            }
        };

        // æ•°ç§˜è¡“è§£é‡ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
        const numerologyInterpretations = {
            lifePath: {
                1: {
                    personality: 'ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã«é•·ã‘ãŸé–‹æ‹“è€…ã‚¿ã‚¤ãƒ—ã€‚ç‹¬ç«‹å¿ƒãŒå¼·ãã€æ–°ã—ã„ã“ã¨ã«æŒ‘æˆ¦ã™ã‚‹ã“ã¨ã‚’å¥½ã¿ã¾ã™ã€‚',
                    strengths: 'æ±ºæ–­åŠ›ã€ç‹¬å‰µæ€§ã€ç©æ¥µæ€§',
                    challenges: 'æˆ‘ãŒå¼·ã™ãã‚‹ã“ã¨ã€å”èª¿æ€§ã®æ¬ å¦‚'
                },
                2: {
                    personality: 'å”èª¿æ€§ã¨å¤–äº¤èƒ½åŠ›ã«å„ªã‚ŒãŸå¹³å’Œä¸»ç¾©è€…ã€‚äººã¨ã®ã¤ãªãŒã‚Šã‚’å¤§åˆ‡ã«ã—ã€èª¿å’Œã‚’é‡è¦–ã—ã¾ã™ã€‚',
                    strengths: 'å”åŠ›æ€§ã€æ„Ÿå—æ€§ã€ãƒãƒ©ãƒ³ã‚¹æ„Ÿè¦š',
                    challenges: 'å„ªæŸ”ä¸æ–­ã€è‡ªä¿¡ä¸è¶³'
                },
                3: {
                    personality: 'å‰µé€ æ€§ã¨ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³èƒ½åŠ›ã«é•·ã‘ãŸè¡¨ç¾è€…ã€‚èŠ¸è¡“çš„æ‰èƒ½ãŒã‚ã‚Šã€äººã‚’æ¥½ã—ã¾ã›ã‚‹ã“ã¨ãŒå¾—æ„ã§ã™ã€‚',
                    strengths: 'å‰µé€ åŠ›ã€è¡¨ç¾åŠ›ã€æ¥½è¦³æ€§',
                    challenges: 'é›†ä¸­åŠ›ä¸è¶³ã€æµªè²»å‚¾å‘'
                },
                4: {
                    personality: 'å …å®Ÿã§è²¬ä»»æ„Ÿã®å¼·ã„çµ„ç¹”è€…ã‚¿ã‚¤ãƒ—ã€‚è¨ˆç”»æ€§ãŒã‚ã‚Šã€ã‚³ãƒ„ã‚³ãƒ„ã¨åŠªåŠ›ã‚’ç©ã¿é‡ã­ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚',
                    strengths: 'å …å®Ÿæ€§ã€çµ„ç¹”åŠ›ã€å¿è€åŠ›',
                    challenges: 'é ‘å›ºã•ã€å¤‰åŒ–ã¸ã®æŠµæŠ—'
                },
                5: {
                    personality: 'è‡ªç”±ã‚’æ„›ã™ã‚‹å†’é™ºå®¶ã‚¿ã‚¤ãƒ—ã€‚å¤‰åŒ–ã¨åˆºæ¿€ã‚’æ±‚ã‚ã€å¤šæ§˜ãªçµŒé¨“ã‚’é€šã˜ã¦æˆé•·ã—ã¾ã™ã€‚',
                    strengths: 'é©å¿œåŠ›ã€å¥½å¥‡å¿ƒã€è‡ªç”±ã•',
                    challenges: 'é£½ãã£ã½ã•ã€è²¬ä»»å›é¿'
                },
                6: {
                    personality: 'æ„›æƒ…æ·±ã„ä¸–è©±å¥½ãã‚¿ã‚¤ãƒ—ã€‚å®¶æ—ã‚„å‹äººã‚’å¤§åˆ‡ã«ã—ã€ä»–äººã®ãŸã‚ã«å°½ãã™ã“ã¨ã«å–œã³ã‚’æ„Ÿã˜ã¾ã™ã€‚',
                    strengths: 'æ€ã„ã‚„ã‚Šã€è²¬ä»»æ„Ÿã€ç¾çš„ã‚»ãƒ³ã‚¹',
                    challenges: 'éä¿è­·ã€å¿ƒé…æ€§'
                },
                7: {
                    personality: 'å†…çœçš„ã§ç²¾ç¥æ€§ã‚’é‡è¦–ã™ã‚‹æ¢æ±‚è€…ã‚¿ã‚¤ãƒ—ã€‚æ·±ãè€ƒãˆã€çœŸç†ã‚’è¿½æ±‚ã™ã‚‹ã“ã¨ã‚’å¥½ã¿ã¾ã™ã€‚',
                    strengths: 'æ´å¯ŸåŠ›ã€ç›´æ„ŸåŠ›ã€ç²¾ç¥æ€§',
                    challenges: 'å­¤ç«‹ã—ãŒã¡ã€ç¾å®Ÿé€ƒé¿'
                },
                8: {
                    personality: 'é‡å¿ƒçš„ã§å®ŸåŠ›ä¸»ç¾©ã®æˆåŠŸè€…ã‚¿ã‚¤ãƒ—ã€‚ç‰©è³ªçš„æˆåŠŸã‚’è¿½æ±‚ã—ã€æ¨©åŠ›ã‚„åœ°ä½ã«é–¢å¿ƒãŒã‚ã‚Šã¾ã™ã€‚',
                    strengths: 'å®Ÿè¡ŒåŠ›ã€é‡å¿ƒã€çµŒå–¶èƒ½åŠ›',
                    challenges: 'ç‰©è³ªä¸»ç¾©ã€æ¨©åŠ›æ¬²'
                },
                9: {
                    personality: 'åšæ„›ç²¾ç¥ã«æº€ã¡ãŸäººé“ä¸»ç¾©è€…ã‚¿ã‚¤ãƒ—ã€‚å¤šãã®äººã®å¹¸ã›ã‚’é¡˜ã„ã€ç¤¾ä¼šè²¢çŒ®ã«é–¢å¿ƒãŒã‚ã‚Šã¾ã™ã€‚',
                    strengths: 'æ…ˆæ‚²å¿ƒã€ç†æƒ³ä¸»ç¾©ã€åºƒã„è¦–é‡',
                    challenges: 'ç†æƒ³ã¨ç¾å®Ÿã®ã‚®ãƒ£ãƒƒãƒ—ã€æ„Ÿæƒ…çš„'
                },
                11: {
                    personality: 'ç›´æ„ŸåŠ›ã«å„ªã‚ŒãŸã‚¹ãƒ”ãƒªãƒãƒ¥ã‚¢ãƒ«ãªãƒªãƒ¼ãƒ€ãƒ¼ã‚¿ã‚¤ãƒ—ã€‚é«˜ã„ç†æƒ³ã‚’æŒã¡ã€äººã€…ã‚’å°ãä½¿å‘½ãŒã‚ã‚Šã¾ã™ã€‚',
                    strengths: 'ç›´æ„ŸåŠ›ã€éœŠæ„Ÿã€æŒ‡å°åŠ›',
                    challenges: 'ç¥çµŒè³ªã€ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ã«å¼±ã„'
                },
                22: {
                    personality: 'å£®å¤§ãªå¤¢ã‚’ç¾å®ŸåŒ–ã™ã‚‹å»ºè¨­è€…ã‚¿ã‚¤ãƒ—ã€‚ç†æƒ³ã¨ç¾å®Ÿã‚’çµã³ã¤ã‘ã€å¤§ããªæˆæœã‚’æ®‹ã™ã“ã¨ãŒã§ãã¾ã™ã€‚',
                    strengths: 'å®Ÿç¾åŠ›ã€æŒ‡å°åŠ›ã€æ§‹ç¯‰èƒ½åŠ›',
                    challenges: 'é‡åœ§ã€å®Œç’§ä¸»ç¾©'
                }
            },
            personalDay: {
                1: 'æ–°ã—ã„ã‚¹ã‚¿ãƒ¼ãƒˆã«æœ€é©ãªæ—¥ã€‚ç©æ¥µçš„ã«è¡Œå‹•ã™ã‚‹ã¨è‰¯ã„çµæœãŒå¾—ã‚‰ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚',
                2: 'å”åŠ›ã¨èª¿å’Œã‚’é‡è¦–ã™ã‚‹æ—¥ã€‚äººã¨ã®é–¢ä¿‚ã‚’å¤§åˆ‡ã«ã—ã€ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’æ´»ã‹ã—ã¾ã—ã‚‡ã†ã€‚',
                3: 'å‰µé€ æ€§ã¨è¡¨ç¾åŠ›ãŒé«˜ã¾ã‚‹æ—¥ã€‚èŠ¸è¡“çš„æ´»å‹•ã‚„ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«è‰¯ã„æ—¥ã§ã™ã€‚',
                4: 'è¨ˆç”»çš„ã«ç‰©äº‹ã‚’é€²ã‚ã‚‹æ—¥ã€‚åœ°é“ãªåŠªåŠ›ãŒå®Ÿã‚’çµã¶æ™‚æœŸã§ã™ã€‚',
                5: 'å¤‰åŒ–ã¨å†’é™ºã‚’æ¥½ã—ã‚€æ—¥ã€‚æ–°ã—ã„ä½“é¨“ã‚„å‡ºä¼šã„ãŒå¾…ã£ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚',
                6: 'å®¶æ—ã‚„æ„›ã™ã‚‹äººã¨ã®æ™‚é–“ã‚’å¤§åˆ‡ã«ã™ã‚‹æ—¥ã€‚æ€ã„ã‚„ã‚Šã¨æ„›æƒ…ãŒå¹¸é‹ã‚’å‘¼ã³ã¾ã™ã€‚',
                7: 'å†…çœã¨å­¦ç¿’ã«é©ã—ãŸæ—¥ã€‚ä¸€äººã®æ™‚é–“ã‚’å¤§åˆ‡ã«ã—ã€ç²¾ç¥çš„ãªæˆé•·ã‚’å›³ã‚Šã¾ã—ã‚‡ã†ã€‚',
                8: 'ç›®æ¨™é”æˆã«å‘ã‘ã¦åŠªåŠ›ã™ã‚‹æ—¥ã€‚ãƒ“ã‚¸ãƒã‚¹ã‚„å®Ÿå‹™é¢ã§æˆæœã‚’ä¸Šã’ã‚„ã™ã„æ™‚æœŸã§ã™ã€‚',
                9: 'ä»–äººã¸ã®å¥‰ä»•ã¨æ…ˆæ„›ã®æ—¥ã€‚äººåŠ©ã‘ã‚„ç¤¾ä¼šè²¢çŒ®æ´»å‹•ã«è‰¯ã„ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒæµã‚Œã¦ã„ã¾ã™ã€‚'
            },
            personalMonth: {
                1: 'æ–°ã—ã„ã‚µã‚¤ã‚¯ãƒ«ã®å§‹ã¾ã‚Šã€‚ä»Šæœˆã¯æ–°ä¼ç”»ã‚„æ–°ã—ã„é–¢ä¿‚ã‚’ã‚¹ã‚¿ãƒ¼ãƒˆã•ã›ã‚‹ã®ã«æœ€é©ã§ã™ã€‚',
                2: 'å”åŠ›é–¢ä¿‚ã‚’æ·±ã‚ã‚‹æœˆã€‚ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚·ãƒƒãƒ—ã‚„å‹æƒ…ã‚’è‚²ã‚€ã“ã¨ã«é‡ç‚¹ã‚’ç½®ãã¾ã—ã‚‡ã†ã€‚',
                3: 'å‰µé€ æ€§ãŒé–‹èŠ±ã™ã‚‹æœˆã€‚èŠ¸è¡“çš„æ´»å‹•ã‚„è‡ªå·±è¡¨ç¾ã«ç©æ¥µçš„ã«å–ã‚Šçµ„ã¿ã¾ã—ã‚‡ã†ã€‚',
                4: 'åŸºç›¤ã‚’å›ºã‚ã‚‹æœˆã€‚è¨ˆç”»ã‚’ç«‹ã¦ã€ç€å®Ÿã«ç›®æ¨™ã«å‘ã‹ã£ã¦é€²ã¿ã¾ã—ã‚‡ã†ã€‚',
                5: 'å¤‰åŒ–ã¨è‡ªç”±ã‚’æ±‚ã‚ã‚‹æœˆã€‚æ–°ã—ã„çµŒé¨“ã‚„å†’é™ºã«ç©æ¥µçš„ã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã¿ã¦ãã ã•ã„ã€‚',
                6: 'æ„›ã¨è²¬ä»»ã®æœˆã€‚å®¶æ—ã‚„å¤§åˆ‡ãªäººã¨ã®çµ†ã‚’æ·±ã‚ã€è²¬ä»»ã‚’æœãŸã™ã“ã¨ã«é›†ä¸­ã—ã¾ã—ã‚‡ã†ã€‚',
                7: 'å†…é¢ã¨å‘ãåˆã†æœˆã€‚ç‘æƒ³ã‚„å­¦ç¿’ã‚’é€šã˜ã¦ã€ç²¾ç¥çš„ãªæˆé•·ã‚’å›³ã‚‹æ™‚æœŸã§ã™ã€‚',
                8: 'æˆæœã‚’åç©«ã™ã‚‹æœˆã€‚ãƒ“ã‚¸ãƒã‚¹ã‚„ç‰©è³ªé¢ã§ã®æˆåŠŸãŒæœŸå¾…ã§ãã‚‹æ™‚æœŸã§ã™ã€‚',
                9: 'å®Œæˆã¨æ‰‹æ”¾ã—ã®æœˆã€‚ä¸è¦ãªã‚‚ã®ã‚’æ‰‹æ”¾ã—ã€æ–°ã—ã„ã‚µã‚¤ã‚¯ãƒ«ã«å‘ã‘ã¦æº–å‚™ã—ã¾ã—ã‚‡ã†ã€‚'
            }
        };

        function createStars() {
            const starsContainer = document.getElementById('stars');
            const starCount = 50;
            
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 2 + 's';
                starsContainer.appendChild(star);
            }
        }

        function populateDays() {
            const monthSelect = document.getElementById('month');
            const daySelect = document.getElementById('day');
            const hourSelect = document.getElementById('hour');
            const minuteSelect = document.getElementById('minute');
            
            // æ™‚é–“ã®é¸æŠè‚¢ã‚’ä½œæˆ
            for (let hour = 0; hour < 24; hour++) {
                const option = document.createElement('option');
                option.value = hour;
                option.textContent = hour.toString().padStart(2, '0') + 'æ™‚';
                hourSelect.appendChild(option);
            }
            
            // åˆ†ã®é¸æŠè‚¢ã‚’ä½œæˆï¼ˆ1åˆ†åˆ»ã¿ï¼‰
            for (let minute = 0; minute < 60; minute++) {
                const option = document.createElement('option');
                option.value = minute;
                option.textContent = minute.toString().padStart(2, '0') + 'åˆ†';
                minuteSelect.appendChild(option);
            }
            
            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§12:00ã‚’é¸æŠ
            hourSelect.value = 12;
            minuteSelect.value = 0;
            
            monthSelect.addEventListener('change', function() {
                const year = parseInt(document.getElementById('year').value) || 2024;
                const month = parseInt(this.value);
                daySelect.innerHTML = '<option value="">æ—¥ã‚’é¸æŠ</option>';
                
                if (month) {
                    const daysInMonth = new Date(year, month, 0).getDate();
                    for (let day = 1; day <= daysInMonth; day++) {
                        const option = document.createElement('option');
                        option.value = day;
                        option.textContent = day + 'æ—¥';
                        daySelect.appendChild(option);
                    }
                }
            });
        }

        function getZodiacSign(month, day) {
            for (const [sign, data] of Object.entries(zodiacData)) {
                const [[startMonth, startDay], [endMonth, endDay]] = data.dates;
                
                if (startMonth === endMonth) {
                    if (month === startMonth && day >= startDay && day <= endDay) {
                        return sign;
                    }
                } else {
                    if ((month === startMonth && day >= startDay) || 
                        (month === endMonth && day <= endDay)) {
                        return sign;
                    }
                }
                
                if (data.extra) {
                    const [[extraStartMonth, extraStartDay], [extraEndMonth, extraEndDay]] = data.extra;
                    if ((month === extraStartMonth && day >= extraStartDay) || 
                        (month === extraEndMonth && day <= extraEndDay)) {
                        return sign;
                    }
                }
            }
            return null;
        }

        // å¤©ä½“ä½ç½®ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®é–¢æ•°
        async function getPlanetaryPositions(birthDate) {
            try {
                // ç”Ÿå¹´æœˆæ—¥ã‚’åŸºã«å¤©ä½“ä½ç½®ã‚’è¨ˆç®—ï¼ˆä»Šæ—¥ã®é‹å‹¢ãªã®ã§ä»Šæ—¥ã®æ—¥ä»˜ã‚’ä½¿ç”¨ï¼‰
                const today = new Date();
                
                // ç”Ÿå¹´æœˆæ—¥ã®æƒ…å ±ã‚‚è€ƒæ…®ã—ãŸå€‹åˆ¥ã®å¤©ä½“é…ç½®è¨ˆç®—
                const positions = calculatePlanetaryPositions(today, birthDate);
                
                return positions;
            } catch (error) {
                console.error('å¤©ä½“ä½ç½®ã®å–å¾—ã«å¤±æ•—:', error);
                return null;
            }
        }

        // ã‚ˆã‚Šæœ¬æ ¼çš„ãªå¤©ä½“ä½ç½®è¨ˆç®—ï¼ˆå®Ÿéš›ã®å¤©ä½“æš¦ã«åŸºã¥ãï¼‰
        function calculatePlanetaryPositions(date, birthDate = null) {
            const J2000_EPOCH = new Date('2000-01-01T12:00:00Z');
            const daysSinceJ2000 = (date - J2000_EPOCH) / (1000 * 60 * 60 * 24);
            
            // å®Ÿéš›ã®å¹³å‡è»Œé“è¦ç´ ã‚’ä½¿ç”¨ã—ãŸå¤©ä½“ä½ç½®è¨ˆç®—
            const meanLongitudes = {
                sun: (280.460 + 0.9856474 * daysSinceJ2000) % 360,
                moon: (218.316 + 13.176396 * daysSinceJ2000) % 360,
                mercury: (252.251 + 4.092317 * daysSinceJ2000) % 360,
                venus: (181.975 + 1.602136 * daysSinceJ2000) % 360,
                mars: (355.453 + 0.524033 * daysSinceJ2000) % 360,
                jupiter: (34.351 + 0.083091 * daysSinceJ2000) % 360,
                saturn: (50.077 + 0.033494 * daysSinceJ2000) % 360
            };
            
            // æ¥•å††è»Œé“ã®è£œæ­£ï¼ˆç°¡æ˜“ç‰ˆï¼‰
            const eccentricityCorrections = {
                sun: 1.915 * Math.sin((357.5 + 0.9856 * daysSinceJ2000) * Math.PI / 180),
                moon: 6.289 * Math.sin((134.9 + 13.0649 * daysSinceJ2000) * Math.PI / 180),
                mercury: 23.44 * Math.sin((174.8 + 4.092 * daysSinceJ2000) * Math.PI / 180),
                venus: 0.775 * Math.sin((50.4 + 1.602 * daysSinceJ2000) * Math.PI / 180),
                mars: 10.69 * Math.sin((19.4 + 0.524 * daysSinceJ2000) * Math.PI / 180),
                jupiter: 5.555 * Math.sin((20.0 + 0.083 * daysSinceJ2000) * Math.PI / 180),
                saturn: 6.406 * Math.sin((317.0 + 0.033 * daysSinceJ2000) * Math.PI / 180)
            };
            
            // è£œæ­£å¾Œã®å¤©ä½“ä½ç½®
            let positions = {};
            Object.keys(meanLongitudes).forEach(planet => {
                positions[planet] = (meanLongitudes[planet] + eccentricityCorrections[planet]) % 360;
                if (positions[planet] < 0) positions[planet] += 360;
            });
            
            // å‡ºç”Ÿå›³ã®è¨ˆç®—ï¼ˆbirthDateãŒæä¾›ã•ã‚Œã¦ã„ã‚‹å ´åˆï¼‰
            let birthChart = null;
            if (birthDate) {
                birthChart = calculateBirthChart(birthDate);
            }
            
            // æƒ‘æ˜Ÿé€†è¡Œã®åˆ¤å®šï¼ˆã‚ˆã‚Šç²¾å¯†ã«ï¼‰
            const retrogradeData = checkRetrogradeAccurate(daysSinceJ2000);
            
            // æœˆç›¸ã®è¨ˆç®—
            const moonPhase = calculateMoonPhase(date);

            // åº¦æ•°ã‚’æ˜Ÿåº§ã«å¤‰æ›
            const zodiacSigns = ['ç‰¡ç¾Šåº§', 'ç‰¡ç‰›åº§', 'åŒå­åº§', 'èŸ¹åº§', 'ç…å­åº§', 'ä¹™å¥³åº§', 
                               'å¤©ç§¤åº§', 'è åº§', 'å°„æ‰‹åº§', 'å±±ç¾Šåº§', 'æ°´ç“¶åº§', 'é­šåº§'];
            
            const result = {};
            for (const [planet, degree] of Object.entries(positions)) {
                const signIndex = Math.floor(degree / 30);
                const signDegree = Math.floor(degree % 30);
                
                result[planet] = {
                    sign: zodiacSigns[signIndex],
                    degree: signDegree,
                    longitude: degree, // æ­£ç¢ºãªé»„çµŒ
                    retrograde: retrogradeData[planet] || false
                };
            }
            
            // æœˆç›¸ã¨ãƒã‚¦ã‚¹æƒ…å ±ã‚’è¿½åŠ 
            result.moonPhase = moonPhase;
            result.birthChart = birthChart;
            
            return result;
        }
        
        // å‡ºç”Ÿå›³ã®è¨ˆç®—
        function calculateBirthChart(birthDate) {
            const J2000_EPOCH = new Date('2000-01-01T12:00:00Z');
            const daysSinceBirth = (birthDate - J2000_EPOCH) / (1000 * 60 * 60 * 24);
            
            // å‡ºç”Ÿæ™‚ã®å¤©ä½“ä½ç½®è¨ˆç®—
            const birthPositions = {
                sun: (280.460 + 0.9856474 * daysSinceBirth) % 360,
                moon: (218.316 + 13.176396 * daysSinceBirth) % 360,
                mercury: (252.251 + 4.092317 * daysSinceBirth) % 360,
                venus: (181.975 + 1.602136 * daysSinceBirth) % 360,
                mars: (355.453 + 0.524033 * daysSinceBirth) % 360,
                jupiter: (34.351 + 0.083091 * daysSinceBirth) % 360,
                saturn: (50.077 + 0.033494 * daysSinceBirth) % 360
            };
            
            // ç°¡æ˜“ãƒã‚¦ã‚¹ã‚·ã‚¹ãƒ†ãƒ ï¼ˆå‡ºç”Ÿæ™‚åˆ»ã«ã‚ˆã‚‹ï¼‰
            const birthHour = birthDate.getHours();
            const ascendant = (birthHour * 15) % 360; // ä¸Šæ˜‡å®®ï¼ˆç°¡æ˜“è¨ˆç®—ï¼‰
            
            const zodiacSigns = ['ç‰¡ç¾Šåº§', 'ç‰¡ç‰›åº§', 'åŒå­åº§', 'èŸ¹åº§', 'ç…å­åº§', 'ä¹™å¥³åº§', 
                               'å¤©ç§¤åº§', 'è åº§', 'å°„æ‰‹åº§', 'å±±ç¾Šåº§', 'æ°´ç“¶åº§', 'é­šåº§'];
            
            const birthChart = {
                ascendant: {
                    sign: zodiacSigns[Math.floor(ascendant / 30)],
                    degree: Math.floor(ascendant % 30)
                },
                planets: {}
            };
            
            Object.keys(birthPositions).forEach(planet => {
                const longitude = birthPositions[planet];
                birthChart.planets[planet] = {
                    sign: zodiacSigns[Math.floor(longitude / 30)],
                    degree: Math.floor(longitude % 30),
                    longitude: longitude
                };
            });
            
            return birthChart;
        }
        
        // ã‚ˆã‚Šç²¾å¯†ãªæƒ‘æ˜Ÿé€†è¡Œã®åˆ¤å®š
        function checkRetrogradeAccurate(daysSinceJ2000) {
            // å®Ÿéš›ã®é€†è¡Œå‘¨æœŸã«åŸºã¥ãè¨ˆç®—
            const retrogradePatterns = {
                mercury: Math.sin((daysSinceJ2000 / 88) * 2 * Math.PI) < -0.3, // 88æ—¥å‘¨æœŸ
                venus: Math.sin((daysSinceJ2000 / 584) * 2 * Math.PI) < -0.7, // 584æ—¥å‘¨æœŸ  
                mars: Math.sin((daysSinceJ2000 / 687) * 2 * Math.PI) < -0.6, // 687æ—¥å‘¨æœŸ
                jupiter: Math.sin((daysSinceJ2000 / 399) * 2 * Math.PI) < -0.5, // 399æ—¥å‘¨æœŸ
                saturn: Math.sin((daysSinceJ2000 / 378) * 2 * Math.PI) < -0.5, // 378æ—¥å‘¨æœŸ
                sun: false, // å¤ªé™½ã¯é€†è¡Œã—ãªã„
                moon: false // æœˆã¯é€†è¡Œã—ãªã„
            };
            
            return retrogradePatterns;
        }
        
        // æœˆç›¸ã®è¨ˆç®—
        function calculateMoonPhase(date) {
            const knownNewMoon = new Date('2024-01-11'); // æ—¢çŸ¥ã®æ–°æœˆ
            const synodicMonth = 29.53059; // æœ”æœ›æœˆ
            
            const daysDiff = (date - knownNewMoon) / (1000 * 60 * 60 * 24);
            const lunarCycle = ((daysDiff % synodicMonth) + synodicMonth) % synodicMonth;
            
            if (lunarCycle < 1.84) return { name: 'æ–°æœˆ', effect: 'new_beginning' };
            else if (lunarCycle < 5.53) return { name: 'ä¸‰æ—¥æœˆ', effect: 'growth' };
            else if (lunarCycle < 9.22) return { name: 'ä¸Šå¼¦ã®æœˆ', effect: 'action' };
            else if (lunarCycle < 12.91) return { name: 'åä¸‰å¤œ', effect: 'manifestation' };
            else if (lunarCycle < 16.61) return { name: 'æº€æœˆ', effect: 'completion' };
            else if (lunarCycle < 20.30) return { name: 'å¯å¾…æœˆ', effect: 'gratitude' };
            else if (lunarCycle < 23.99) return { name: 'ä¸‹å¼¦ã®æœˆ', effect: 'release' };
            else if (lunarCycle < 27.68) return { name: 'æœ‰æ˜æœˆ', effect: 'reflection' };
            else return { name: 'æ–°æœˆå‰', effect: 'preparation' };
        }

        // æƒ‘æ˜ŸåŒå£«ã®ã‚¢ã‚¹ãƒšã‚¯ãƒˆï¼ˆè§’åº¦é–¢ä¿‚ï¼‰ã‚’è¨ˆç®—
        function calculateAspects(positions) {
            const aspects = [];
            const planets = Object.keys(positions);
            const aspectTypes = {
                0: { name: 'åˆ', orb: 8, effect: 'strong' },
                60: { name: 'å…­åˆ†', orb: 6, effect: 'harmonious' },
                90: { name: 'å››åˆ†', orb: 8, effect: 'challenging' },
                120: { name: 'ä¸‰åˆ†', orb: 8, effect: 'harmonious' },
                180: { name: 'å¯¾ç«‹', orb: 8, effect: 'challenging' }
            };
            
            for (let i = 0; i < planets.length; i++) {
                for (let j = i + 1; j < planets.length; j++) {
                    const planet1 = planets[i];
                    const planet2 = planets[j];
                    const degree1 = positions[planet1].degree + (getSignIndex(positions[planet1].sign) * 30);
                    const degree2 = positions[planet2].degree + (getSignIndex(positions[planet2].sign) * 30);
                    
                    let angleDiff = Math.abs(degree1 - degree2);
                    if (angleDiff > 180) angleDiff = 360 - angleDiff;
                    
                    for (const [aspectDegree, aspectInfo] of Object.entries(aspectTypes)) {
                        const targetAngle = parseInt(aspectDegree);
                        if (Math.abs(angleDiff - targetAngle) <= aspectInfo.orb) {
                            aspects.push({
                                planet1,
                                planet2,
                                aspect: aspectInfo.name,
                                effect: aspectInfo.effect,
                                angle: angleDiff
                            });
                        }
                    }
                }
            }
            return aspects;
        }
        
        function getSignIndex(signName) {
            const signs = ['ç‰¡ç¾Šåº§', 'ç‰¡ç‰›åº§', 'åŒå­åº§', 'èŸ¹åº§', 'ç…å­åº§', 'ä¹™å¥³åº§', 
                          'å¤©ç§¤åº§', 'è åº§', 'å°„æ‰‹åº§', 'å±±ç¾Šåº§', 'æ°´ç“¶åº§', 'é­šåº§'];
            return signs.indexOf(signName);
        }
        
        // ãƒˆãƒ©ãƒ³ã‚¸ãƒƒãƒˆåŠ¹æœã®è¨ˆç®—ï¼ˆç¾åœ¨ã®å¤©ä½“ã¨å‡ºç”Ÿå›³ã®ç›¸äº’ä½œç”¨ï¼‰
        function calculateTransitEffects(currentPositions, birthChart) {
            let effects = {
                overall: '',
                love: '',
                work: '',
                health: ''
            };
            
            // ä¸»è¦ãªãƒˆãƒ©ãƒ³ã‚¸ãƒƒãƒˆã‚’ãƒã‚§ãƒƒã‚¯
            const transitPlanets = ['sun', 'moon', 'mercury', 'venus', 'mars', 'jupiter', 'saturn'];
            
            transitPlanets.forEach(transitPlanet => {
                const currentPlanet = currentPositions[transitPlanet];
                if (!currentPlanet) return;
                
                // å‡ºç”Ÿå›³ã®å„æƒ‘æ˜Ÿã¨ã®è§’åº¦ã‚’ãƒã‚§ãƒƒã‚¯
                Object.keys(birthChart.planets).forEach(natalPlanet => {
                    const natalPosition = birthChart.planets[natalPlanet];
                    const angleDiff = Math.abs(currentPlanet.longitude - natalPosition.longitude);
                    const normalizedAngle = angleDiff > 180 ? 360 - angleDiff : angleDiff;
                    
                    // é‡è¦ãªãƒˆãƒ©ãƒ³ã‚¸ãƒƒãƒˆãƒ»ã‚¢ã‚¹ãƒšã‚¯ãƒˆ
                    if (normalizedAngle < 5) { // åˆï¼ˆ0åº¦ï¼‰
                        effects.overall += getTransitInterpretation(transitPlanet, natalPlanet, 'conjunction');
                    } else if (Math.abs(normalizedAngle - 60) < 5) { // å…­åˆ†ï¼ˆ60åº¦ï¼‰
                        effects.love += getTransitInterpretation(transitPlanet, natalPlanet, 'sextile');
                    } else if (Math.abs(normalizedAngle - 90) < 5) { // å››åˆ†ï¼ˆ90åº¦ï¼‰
                        effects.work += getTransitInterpretation(transitPlanet, natalPlanet, 'square');
                    } else if (Math.abs(normalizedAngle - 120) < 5) { // ä¸‰åˆ†ï¼ˆ120åº¦ï¼‰
                        effects.overall += getTransitInterpretation(transitPlanet, natalPlanet, 'trine');
                    } else if (Math.abs(normalizedAngle - 180) < 5) { // å¯¾ç«‹ï¼ˆ180åº¦ï¼‰
                        effects.health += getTransitInterpretation(transitPlanet, natalPlanet, 'opposition');
                    }
                });
            });
            
            return effects;
        }
        
        // ãƒˆãƒ©ãƒ³ã‚¸ãƒƒãƒˆè§£é‡ˆã®å–å¾—
        function getTransitInterpretation(transitPlanet, natalPlanet, aspectType) {
            const interpretations = {
                sun: {
                    sun: {
                        conjunction: ' å¤ªé™½å›å¸°ã®å½±éŸ¿ã§æ–°ã—ã„ã‚µã‚¤ã‚¯ãƒ«ãŒå§‹ã¾ã‚Šã¾ã™ã€‚',
                        trine: ' è‡ªå·±å®Ÿç¾ã®å¥½æ©ŸãŒè¨ªã‚Œã¦ã„ã¾ã™ã€‚'
                    },
                    moon: {
                        conjunction: ' æ„è­˜ã¨æ„Ÿæƒ…ãŒèª¿å’Œã—ã€ç›´æ„ŸãŒå†´ãˆã¦ã„ã¾ã™ã€‚',
                        square: ' æ„Ÿæƒ…ã¨ç†æ€§ã®ãƒãƒ©ãƒ³ã‚¹ã‚’å–ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚'
                    }
                },
                venus: {
                    sun: {
                        conjunction: ' é­…åŠ›ã¨å‰µé€ æ€§ãŒé«˜ã¾ã‚‹æ™‚æœŸã§ã™ã€‚',
                        sextile: ' æ‹æ„›ã‚„ç¾çš„æ´»å‹•ã«è‰¯ã„å½±éŸ¿ãŒã‚ã‚Šã¾ã™ã€‚'
                    },
                    venus: {
                        conjunction: ' é‡‘æ˜Ÿå›å¸°ã«ã‚ˆã‚Šã€æ„›ã¨ç¾ã®æ„è­˜ãŒé«˜ã¾ã‚Šã¾ã™ã€‚'
                    }
                },
                mars: {
                    sun: {
                        conjunction: ' è¡Œå‹•åŠ›ã¨ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒæœ€é«˜æ½®ã«é”ã—ã¾ã™ã€‚',
                        square: ' è¡å‹•çš„ãªè¡Œå‹•ã«æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚'
                    },
                    mars: {
                        conjunction: ' ç«æ˜Ÿå›å¸°ã«ã‚ˆã‚Šã€æ–°ãŸãªæŒ‘æˆ¦ã¸ã®æ„æ¬²ãŒæ¹§ãã¾ã™ã€‚'
                    }
                }
            };
            
            return interpretations[transitPlanet]?.[natalPlanet]?.[aspectType] || '';
        }

        // ã‚ˆã‚Šæœ¬æ ¼çš„ãªå æ˜Ÿè¡“è§£é‡ˆç”Ÿæˆï¼ˆãƒˆãƒ©ãƒ³ã‚¸ãƒƒãƒˆã¨ãƒã‚¤ã‚¿ãƒ«ã®ç›¸äº’ä½œç”¨ï¼‰
        function generateAstrologyFortune(zodiacSign, planetaryPositions, birthDate) {
            const aspects = calculateAspects(planetaryPositions);
            const moonPhase = planetaryPositions.moonPhase;
            const birthChart = planetaryPositions.birthChart;
            
            // åŸºæœ¬è§£é‡ˆ
            const sunInterpretation = astroInterpretations.sun[planetaryPositions.sun.sign];
            const venusInterpretation = astroInterpretations.venus[planetaryPositions.venus.sign];
            const marsInterpretation = astroInterpretations.mars[planetaryPositions.mars.sign];
            const moonInterpretation = astroInterpretations.moon[planetaryPositions.moon.sign];
            
            // ãƒˆãƒ©ãƒ³ã‚¸ãƒƒãƒˆè§£é‡ˆï¼ˆç¾åœ¨ã®å¤©ä½“ãŒå‡ºç”Ÿå›³ã«ä¸ãˆã‚‹å½±éŸ¿ï¼‰
            let transitEffects = '';
            if (birthChart) {
                transitEffects = calculateTransitEffects(planetaryPositions, birthChart);
            }
            
            // ã‚¢ã‚¹ãƒšã‚¯ãƒˆã«ã‚ˆã‚‹ä¿®æ­£
            let aspectModifications = {
                overall: '',
                love: '',
                work: '',
                health: ''
            };
            
            aspects.forEach(aspect => {
                if (aspect.planet1 === 'sun' || aspect.planet2 === 'sun') {
                    if (aspect.effect === 'harmonious') {
                        aspectModifications.overall += ' å¤ªé™½ã®èª¿å’Œçš„ãªé…ç½®ã«ã‚ˆã‚Šã€å…¨ä½“çš„ã«è‰¯ã„æµã‚ŒãŒæœŸå¾…ã§ãã¾ã™ã€‚';
                    } else if (aspect.effect === 'challenging') {
                        aspectModifications.overall += ' å¤ªé™½ã®ç·Šå¼µé…ç½®ã«ã‚ˆã‚Šã€æ³¨æ„æ·±ã„è¡Œå‹•ãŒå¿…è¦ã§ã™ãŒã€æˆé•·ã®æ©Ÿä¼šã§ã‚‚ã‚ã‚Šã¾ã™ã€‚';
                    }
                }
                
                if ((aspect.planet1 === 'venus' && aspect.planet2 === 'mars') || 
                    (aspect.planet1 === 'mars' && aspect.planet2 === 'venus')) {
                    if (aspect.effect === 'harmonious') {
                        aspectModifications.love += ' é‡‘æ˜Ÿã¨ç«æ˜Ÿã®è‰¯ã„é…ç½®ã«ã‚ˆã‚Šã€æ‹æ„›ã«ãŠã„ã¦ç©æ¥µæ€§ã¨é­…åŠ›ãŒèª¿å’Œã—ã¾ã™ã€‚';
                    } else if (aspect.effect === 'challenging') {
                        aspectModifications.love += ' é‡‘æ˜Ÿã¨ç«æ˜Ÿã®ç·Šå¼µé…ç½®ã«ã‚ˆã‚Šã€æ‹æ„›ã§ã¯æ…é‡ã•ã¨æƒ…ç†±ã®ãƒãƒ©ãƒ³ã‚¹ãŒé‡è¦ã§ã™ã€‚';
                    }
                }
            });
            
            // æœˆç›¸ã«ã‚ˆã‚‹å½±éŸ¿
            let moonPhaseEffect = '';
            switch (moonPhase.effect) {
                case 'new_beginning':
                    moonPhaseEffect = ' æ–°æœˆã®å½±éŸ¿ã§æ–°ã—ã„ã‚¹ã‚¿ãƒ¼ãƒˆã«æœ€é©ãªæ™‚æœŸã§ã™ã€‚';
                    break;
                case 'growth':
                    moonPhaseEffect = ' æˆé•·ã®æœˆç›¸ã«ã‚ˆã‚Šã€å­¦ç¿’ã‚„ç™ºå±•ã«è‰¯ã„æ™‚æœŸã§ã™ã€‚';
                    break;
                case 'action':
                    moonPhaseEffect = ' ä¸Šå¼¦ã®æœˆã®åŠ›ã§è¡Œå‹•åŠ›ãŒé«˜ã¾ã‚‹æ™‚æœŸã§ã™ã€‚';
                    break;
                case 'completion':
                    moonPhaseEffect = ' æº€æœˆã®å¼·ã„ã‚¨ãƒãƒ«ã‚®ãƒ¼ã§ç‰©äº‹ãŒå®Œæˆã«å‘ã‹ã†æ™‚æœŸã§ã™ã€‚';
                    break;
                case 'release':
                    moonPhaseEffect = ' ä¸‹å¼¦ã®æœˆã®å½±éŸ¿ã§æ‰‹æ”¾ã—ã¨æµ„åŒ–ã«é©ã—ãŸæ™‚æœŸã§ã™ã€‚';
                    break;
                default:
                    moonPhaseEffect = ` ${moonPhase.name}ã®å½±éŸ¿ã‚’å—ã‘ã¦ã„ã¾ã™ã€‚`;
            }
            
            // æƒ‘æ˜Ÿé€†è¡Œã«ã‚ˆã‚‹å½±éŸ¿
            let retrogradeEffects = '';
            Object.entries(planetaryPositions).forEach(([planet, data]) => {
                if (data.retrograde) {
                    const planetNames = {
                        mercury: 'æ°´æ˜Ÿ',
                        venus: 'é‡‘æ˜Ÿ', 
                        mars: 'ç«æ˜Ÿ',
                        jupiter: 'æœ¨æ˜Ÿ',
                        saturn: 'åœŸæ˜Ÿ'
                    };
                    if (planetNames[planet]) {
                        retrogradeEffects += ` ${planetNames[planet]}é€†è¡Œä¸­ã®ãŸã‚ã€${planet === 'mercury' ? 'ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³' : planet === 'venus' ? 'æ‹æ„›é–¢ä¿‚' : planet === 'mars' ? 'è¡Œå‹•' : 'å¤‰åŒ–'}ã«ã¤ã„ã¦æ…é‡ã«é€²ã‚ã¾ã—ã‚‡ã†ã€‚`;
                    }
                }
            });
            
            // ãƒ©ãƒƒã‚­ãƒ¼ã‚«ãƒ©ãƒ¼ã¨ãƒŠãƒ³ãƒãƒ¼ã‚’å¤©ä½“ä½ç½®ã‹ã‚‰ç®—å‡ºï¼ˆç”Ÿå¹´æœˆæ—¥è€ƒæ…®ï¼‰
            const luckyColor = getLuckyColor(planetaryPositions);
            const luckyNumber = getLuckyNumber(planetaryPositions, birthDate);
            const advice = generateAdvice(planetaryPositions, aspects, birthDate);
            
            return {
                overall: sunInterpretation + aspectModifications.overall + moonPhaseEffect + retrogradeEffects + transitEffects.overall,
                love: venusInterpretation + aspectModifications.love + transitEffects.love,
                work: marsInterpretation + aspectModifications.work + transitEffects.work,
                health: moonInterpretation + aspectModifications.health + transitEffects.health,
                color: luckyColor,
                number: luckyNumber,
                advice: advice
            };
        }
        
        // å¤©ä½“ä½ç½®ã‹ã‚‰ãƒ©ãƒƒã‚­ãƒ¼ã‚«ãƒ©ãƒ¼ã‚’ç®—å‡º
        function getLuckyColor(positions) {
            const colors = {
                'ç‰¡ç¾Šåº§': 'ãƒ¬ãƒƒãƒ‰', 'ç‰¡ç‰›åº§': 'ã‚°ãƒªãƒ¼ãƒ³', 'åŒå­åº§': 'ã‚¤ã‚¨ãƒ­ãƒ¼',
                'èŸ¹åº§': 'ã‚·ãƒ«ãƒãƒ¼', 'ç…å­åº§': 'ã‚´ãƒ¼ãƒ«ãƒ‰', 'ä¹™å¥³åº§': 'ãƒã‚¤ãƒ“ãƒ¼',
                'å¤©ç§¤åº§': 'ãƒ”ãƒ³ã‚¯', 'è åº§': 'ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ¬ãƒƒãƒ‰', 'å°„æ‰‹åº§': 'ãƒ‘ãƒ¼ãƒ—ãƒ«',
                'å±±ç¾Šåº§': 'ãƒ–ãƒ©ã‚¦ãƒ³', 'æ°´ç“¶åº§': 'ã‚¢ã‚¯ã‚¢ãƒ–ãƒ«ãƒ¼', 'é­šåº§': 'ã‚·ãƒ¼ãƒ–ãƒ«ãƒ¼'
            };
            
            // é‡‘æ˜Ÿã®æ˜Ÿåº§ã‹ã‚‰ãƒ©ãƒƒã‚­ãƒ¼ã‚«ãƒ©ãƒ¼ã‚’æ±ºå®š
            return colors[positions.venus.sign] || 'ãƒ”ãƒ³ã‚¯';
        }
        
        // å¤©ä½“ä½ç½®ã‹ã‚‰ãƒ©ãƒƒã‚­ãƒ¼ãƒŠãƒ³ãƒãƒ¼ã‚’ç®—å‡ºï¼ˆç”Ÿå¹´æœˆæ—¥ã‚‚è€ƒæ…®ï¼‰
        function getLuckyNumber(positions, birthDate) {
            let sum = 0;
            
            // å¤©ä½“ä½ç½®ã®åº¦æ•°ã‚’åˆè¨ˆ
            Object.values(positions).forEach(pos => {
                if (pos.degree !== undefined) {
                    sum += pos.degree;
                }
            });
            
            // ç”Ÿå¹´æœˆæ—¥ã«ã‚ˆã‚‹å€‹äººçš„ãªå½±éŸ¿ã‚’è¿½åŠ 
            if (birthDate) {
                const birthYear = birthDate.getFullYear();
                const birthMonth = birthDate.getMonth() + 1;
                const birthDay = birthDate.getDate();
                const birthHour = birthDate.getHours();
                const birthMinute = birthDate.getMinutes();
                
                // ç”Ÿå¹´æœˆæ—¥ã‚’æ•°å€¤åŒ–ã—ã¦ãƒ©ãƒƒã‚­ãƒ¼ãƒŠãƒ³ãƒãƒ¼ã«å½±éŸ¿
                const personalLucky = (birthYear % 100) + (birthMonth * 3) + (birthDay * 2) + birthHour + Math.floor(birthMinute / 10);
                sum += personalLucky;
            }
            
            return String(((sum % 99) + 1));
        }
        
        // å¤©ä½“é…ç½®ã‹ã‚‰ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ç”Ÿæˆï¼ˆã‚ˆã‚Šå€‹åˆ¥åŒ–ï¼‰
        function generateAdvice(positions, aspects, birthDate) {
            const baseAdvice = {
                'ç‰¡ç¾Šåº§': ['å‹‡æ°—ã‚’æŒã£ã¦æ–°ã—ã„æŒ‘æˆ¦ã‚’', 'ç©æ¥µçš„ãªè¡Œå‹•ãŒå¹¸é‹ã‚’å‘¼ã¶', 'ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚’ç™ºæ®ã—ã¦'],
                'ç‰¡ç‰›åº§': ['ã‚†ã£ãã‚Šã¨ç¢ºå®Ÿã«é€²ã‚“ã§', 'ç¾ã—ã„ã‚‚ã®ã«è§¦ã‚Œã¦å¿ƒã‚’è±Šã‹ã«', 'äº”æ„Ÿã‚’å¤§åˆ‡ã«ã—ãŸç”Ÿæ´»ã‚’'],
                'åŒå­åº§': ['å¥½å¥‡å¿ƒã‚’å¤§åˆ‡ã«å­¦ã³ç¶šã‘ã¦', 'ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ¥½ã—ã‚“ã§', 'æ–°ã—ã„æƒ…å ±ã«ã‚¢ãƒ³ãƒ†ãƒŠã‚’å¼µã£ã¦'],
                'èŸ¹åº§': ['å¤§åˆ‡ãªäººã¨ã®çµ†ã‚’æ·±ã‚ã¦', 'å®¶æ—ã¨ã®æ™‚é–“ã‚’å¤§åˆ‡ã«', 'ç›´æ„Ÿã‚’ä¿¡ã˜ã¦è¡Œå‹•ã—ã¦'],
                'ç…å­åº§': ['è‡ªä¿¡ã‚’æŒã£ã¦è¼ã„ã¦', 'å‰µé€ æ€§ã‚’å­˜åˆ†ã«ç™ºæ®ã—ã¦', 'å ‚ã€…ã¨è‡ªåˆ†ã‚‰ã—ã•ã‚’è¡¨ç¾ã—ã¦'],
                'ä¹™å¥³åº§': ['ä¸å¯§ã•ãŒæˆåŠŸã®éµ', 'å®Œç’§ã‚’ç›®æŒ‡ã—ã¦åŠªåŠ›ã—ã¦', 'åˆ†æåŠ›ã‚’æ´»ã‹ã—ã¦'],
                'å¤©ç§¤åº§': ['ãƒãƒ©ãƒ³ã‚¹ã¨èª¿å’Œã‚’å¿ƒãŒã‘ã¦', 'ç¾çš„ã‚»ãƒ³ã‚¹ã‚’æ´»ã‹ã—ã¦', 'äººã¨ã®èª¿å’Œã‚’å¤§åˆ‡ã«'],
                'è åº§': ['ç›´æ„Ÿã‚’ä¿¡ã˜ã¦æ·±ãæ¢æ±‚ã‚’', 'é›†ä¸­åŠ›ã§å›°é›£ã‚’ä¹—ã‚Šè¶Šãˆã¦', 'å¤‰åŒ–ã‚’æã‚Œãšå—ã‘å…¥ã‚Œã¦'],
                'å°„æ‰‹åº§': ['åºƒã„è¦–é‡ã§è‡ªç”±ã«ç¾½ã°ãŸã„ã¦', 'æ–°ã—ã„ä¸–ç•Œã‚’æ¢æ±‚ã—ã¦', 'å†’é™ºå¿ƒã‚’å¤§åˆ‡ã«'],
                'å±±ç¾Šåº§': ['ç€å®ŸãªåŠªåŠ›ãŒå®Ÿã‚’çµã¶', 'è²¬ä»»æ„Ÿã‚’æŒã£ã¦è¡Œå‹•ã—ã¦', 'ç›®æ¨™ã«å‘ã‹ã£ã¦ä¸€æ­©ãšã¤'],
                'æ°´ç“¶åº§': ['å€‹æ€§ã‚’æ´»ã‹ã—ã¦é©æ–°ã‚’', 'ç‹¬å‰µçš„ãªã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å¤§åˆ‡ã«', 'ä»²é–“ã¨ã®çµ†ã‚’æ·±ã‚ã¦'],
                'é­šåº§': ['æ€ã„ã‚„ã‚Šã®å¿ƒã§æ„›ã‚’ä¼ãˆã¦', 'èŠ¸è¡“çš„æ„Ÿæ€§ã‚’å¤§åˆ‡ã«', 'ç›´æ„Ÿã«å¾“ã£ã¦']
            };
            
            // ç”Ÿå¹´æœˆæ—¥ã«ã‚ˆã‚‹é¸æŠ
            let adviceIndex = 0;
            if (birthDate) {
                const birthSum = birthDate.getDate() + birthDate.getHours() + birthDate.getMinutes();
                adviceIndex = birthSum % 3;
            }
            
            const selectedAdvice = baseAdvice[positions.sun.sign][adviceIndex];
            return selectedAdvice + 'â™ª';
        }

        // å¤©ä½“ä½ç½®ã®æ–‡å­—åˆ—åŒ–ï¼ˆé€†è¡Œã¨æœˆç›¸æƒ…å ±ã‚’å«ã‚€ï¼‰- ã‚ˆã‚Šåˆ†ã‹ã‚Šã‚„ã™ã
        function formatPlanetaryPositions(positions) {
            const planetNames = {
                sun: 'â˜€ï¸ å¤ªé™½',
                moon: 'ğŸŒ™ æœˆ',
                mercury: 'â˜¿ï¸ æ°´æ˜Ÿ',
                venus: 'â™€ï¸ é‡‘æ˜Ÿ',
                mars: 'â™‚ï¸ ç«æ˜Ÿ',
                jupiter: 'â™ƒ æœ¨æ˜Ÿ',
                saturn: 'â™„ åœŸæ˜Ÿ'
            };
            
            let result = '';
            
            // æœˆç›¸æƒ…å ±ã‚’æœ€åˆã«è¡¨ç¤º
            if (positions.moonPhase) {
                result += `ğŸŒ™ <strong>æœˆç›¸:</strong> ${positions.moonPhase.name}<br><br>`;
            }
            
            // å„æƒ‘æ˜Ÿã®ä½ç½®æƒ…å ± - åº¦æ•°ã¯è¡¨ç¤ºã›ãšã€æ˜Ÿåº§ã®ã¿
            for (const [planet, data] of Object.entries(positions)) {
                if (planet === 'moonPhase') continue; // æœˆç›¸ã¯æ—¢ã«è¡¨ç¤ºæ¸ˆã¿
                
                const retrogradeText = data.retrograde ? ' <span style="color: #D4A5A5;">ï¼ˆé€†è¡Œä¸­ï¼‰</span>' : '';
                result += `${planetNames[planet]}: <strong>${data.sign}</strong>${retrogradeText}<br>`;
            }
            
            result += '<br><small style="color: #A0657A;">å„æƒ‘æ˜ŸãŒã©ã®æ˜Ÿåº§ã«ã‚ã‚‹ã‹ã§ã€ãã®æ˜Ÿåº§ã®ç‰¹æ€§ãŒå¼·èª¿ã•ã‚Œã¾ã™</small>';
            
            return result;
        }

        async function getFortune(zodiacSign, birthDate) {
            // å¤©ä½“ä½ç½®ã‚’å–å¾—
            const planetaryPositions = await getPlanetaryPositions(birthDate);
            
            if (!planetaryPositions) {
                // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: åŸºæœ¬ã®å ã„
                return {
                    fortune: {
                        overall: 'å¤©ä½“ä½ç½®ã®è¨ˆç®—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚åŸºæœ¬çš„ãªå ã„ã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚',
                        love: 'æ‹æ„›é‹ã¯è‰¯å¥½ã§ã™ã€‚',
                        work: 'ä»•äº‹é‹ã‚‚ä¸Šã€…ã§ã™ã€‚',
                        health: 'å¥åº·é‹ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚',
                        color: 'ãƒ”ãƒ³ã‚¯',
                        number: '7',
                        advice: 'å‰å‘ãã«éã”ã—ã¾ã—ã‚‡ã†â™ª'
                    },
                    positions: null
                };
            }
            
            // å¤©ä½“ä½ç½®ã«åŸºã¥ãå ã„ç”Ÿæˆï¼ˆç”Ÿå¹´æœˆæ—¥ã‚‚æ¸¡ã™ï¼‰
            const fortune = generateAstrologyFortune(zodiacSign, planetaryPositions, birthDate);
            
            return {
                fortune: fortune,
                positions: planetaryPositions
            };
        }

        function displayResult(zodiacSign, result, birthDate) {
            const zodiacInfo = zodiacData[zodiacSign];
            const fortune = result.fortune;
            
            // æ˜Ÿåº§å ã„çµæœ
            document.getElementById('zodiacSymbol').textContent = zodiacInfo.symbol;
            document.getElementById('zodiacName').textContent = zodiacSign;
            
            document.getElementById('overallFortune').textContent = fortune.overall;
            document.getElementById('loveFortune').textContent = fortune.love;
            document.getElementById('workFortune').textContent = fortune.work;
            document.getElementById('healthFortune').textContent = fortune.health;
            document.getElementById('luckyColor').textContent = fortune.color;
            document.getElementById('luckyNumber').textContent = fortune.number;
            document.getElementById('advice').textContent = fortune.advice;
            
            // æ•°ç§˜è¡“çµæœ
            const numerologyResults = calculateNumerology(birthDate);
            displayNumerologyResults(numerologyResults);
            
            document.getElementById('loadingCard').style.display = 'none';
            document.getElementById('resultCard').style.display = 'block';
            
            document.getElementById('resultCard').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }
        
        // æ•°ç§˜è¡“è¨ˆç®—ã®çµ±åˆé–¢æ•°
        function calculateNumerology(birthDate) {
            const lifePath = numerologySystem.calculateLifePath(birthDate);
            const personalDay = numerologySystem.calculatePersonalDay(birthDate);
            const personalMonth = numerologySystem.calculatePersonalMonth(birthDate);
            
            return {
                lifePath: lifePath,
                personalDay: personalDay,
                personalMonth: personalMonth,
                personality: numerologyInterpretations.lifePath[lifePath],
                dayMessage: numerologyInterpretations.personalDay[personalDay],
                monthMessage: numerologyInterpretations.personalMonth[personalMonth]
            };
        }
        
        // æ•°ç§˜è¡“çµæœã®è¡¨ç¤º
        function displayNumerologyResults(numerologyResults) {
            document.getElementById('lifePathNumber').textContent = numerologyResults.lifePath;
            document.getElementById('personalDayNumber').textContent = numerologyResults.personalDay;
            document.getElementById('personalMonthNumber').textContent = numerologyResults.personalMonth;
            
            if (numerologyResults.personality) {
                document.getElementById('personalityDescription').textContent = numerologyResults.personality.personality;
                document.getElementById('personalityStrengths').textContent = numerologyResults.personality.strengths;
                document.getElementById('personalityChallenges').textContent = numerologyResults.personality.challenges;
            }
            
            document.getElementById('personalDayMessage').textContent = numerologyResults.dayMessage || 'ä»Šæ—¥ã¯è‰¯ã„æ—¥ã§ã™ã€‚';
            document.getElementById('personalMonthMessage').textContent = numerologyResults.monthMessage || 'ä»Šæœˆã¯é †èª¿ã«é€²ã¿ãã†ã§ã™ã€‚';
        }

        document.getElementById('fortuneForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const year = parseInt(document.getElementById('year').value);
            const month = parseInt(document.getElementById('month').value);
            const day = parseInt(document.getElementById('day').value);
            const hour = parseInt(document.getElementById('hour').value);
            const minute = parseInt(document.getElementById('minute').value);
            
            if (!year || !month || !day || hour === null || minute === null) {
                alert('ã™ã¹ã¦ã®é …ç›®ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            const zodiacSign = getZodiacSign(month, day);
            if (!zodiacSign) {
                alert('æ˜Ÿåº§ã®åˆ¤å®šã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
                return;
            }
            
            // ç”Ÿå¹´æœˆæ—¥ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
            const birthDate = new Date(year, month - 1, day, hour, minute);
            
            document.getElementById('resultCard').style.display = 'none';
            document.getElementById('loadingCard').style.display = 'block';
            
            // å¤©ä½“ä½ç½®ã‚’è¨ˆç®—ã—ã¦å ã„çµæœã‚’ç”Ÿæˆ
            try {
                const result = await getFortune(zodiacSign, birthDate);
                if (result) {
                    displayResult(zodiacSign, result, birthDate);
                } else {
                    document.getElementById('loadingCard').style.display = 'none';
                    alert('å ã„çµæœã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
                }
            } catch (error) {
                console.error('å ã„å‡¦ç†ã‚¨ãƒ©ãƒ¼:', error);
                document.getElementById('loadingCard').style.display = 'none';
                alert('å ã„çµæœã®ç”Ÿæˆä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚');
            }
        });


        createStars();
        populateDays();
    </script>
</body>
</html>