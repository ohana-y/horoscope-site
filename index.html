<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊòüÂ∫ßÂç†„ÅÑ - „ÅÇ„Å™„Åü„ÅÆ‰ªäÊó•„ÅÆÈÅãÂã¢</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', 'Yu Gothic Medium', 'Meiryo', sans-serif;
            background: linear-gradient(135deg, #F5E6E8 0%, #E8C4C4 50%, #D4A5A5 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .star {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInDown 1s ease-out;
        }

        .title {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            color: #8B4B6B;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            font-weight: 400;
            letter-spacing: 2px;
        }

        .subtitle {
            font-size: 1.1rem;
            color: #A0657A;
            font-weight: 300;
        }

        .card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(212, 165, 165, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            animation: fadeInUp 1s ease-out;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            font-size: 1.1rem;
            color: #8B4B6B;
            margin-bottom: 10px;
            font-weight: 500;
        }

        .form-row {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .form-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #E8C4C4;
            border-radius: 15px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
        }

        .form-input:focus {
            outline: none;
            border-color: #D4A5A5;
            box-shadow: 0 0 20px rgba(212, 165, 165, 0.3);
            transform: translateY(-2px);
        }

        .form-select {
            padding: 15px 20px;
            border: 2px solid #E8C4C4;
            border-radius: 15px;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.9);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .form-select:focus {
            outline: none;
            border-color: #D4A5A5;
            box-shadow: 0 0 20px rgba(212, 165, 165, 0.3);
        }

        .btn {
            background: linear-gradient(135deg, #D4A5A5 0%, #C89999 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(212, 165, 165, 0.4);
            font-weight: 500;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(212, 165, 165, 0.6);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .result-card {
            display: none;
            animation: fadeInUp 1s ease-out;
        }

        .zodiac-symbol {
            font-size: 4rem;
            text-align: center;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .zodiac-name {
            font-size: 2rem;
            color: #8B4B6B;
            text-align: center;
            margin-bottom: 30px;
            font-weight: 300;
        }

        .fortune-section {
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(248, 240, 242, 0.7);
            border-radius: 15px;
            border-left: 5px solid #D4A5A5;
        }

        .fortune-title {
            font-family: 'Crimson Text', serif;
            font-size: 1.2rem;
            color: #8B4B6B;
            margin-bottom: 10px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .fortune-content {
            color: #6B4C57;
            line-height: 1.8;
            font-size: 1rem;
        }

        .lucky-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .lucky-item {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(212, 165, 165, 0.2);
        }

        .lucky-label {
            font-size: 0.9rem;
            color: #A0657A;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .lucky-value {
            font-size: 1.3rem;
            color: #8B4B6B;
            font-weight: 600;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #A0657A;
            font-size: 1.1rem;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #E8C4C4;
            border-top: 4px solid #D4A5A5;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .api-key-section {
            background: rgba(255, 248, 220, 0.9);
            border: 2px solid #E8C4C4;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .api-key-title {
            color: #8B4B6B;
            font-size: 1.1rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .api-key-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #E8C4C4;
            border-radius: 10px;
            font-size: 0.95rem;
            background: rgba(255, 255, 255, 0.9);
        }

        .api-key-note {
            font-size: 0.85rem;
            color: #A0657A;
            margin-top: 10px;
            line-height: 1.5;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .title {
                font-size: 2rem;
            }
            
            .card {
                padding: 25px;
                margin-bottom: 20px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 10px;
            }
            
            .lucky-info {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
        }

        @media (max-width: 480px) {
            .title {
                font-size: 1.8rem;
            }
            
            .card {
                padding: 20px;
            }
            
            .lucky-info {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <div class="header">
            <h1 class="title">‚ú® ÊòüÂ∫ßÂç†„ÅÑ & Êï∞ÁßòË°ì ‚ú®</h1>
            <p class="subtitle">Â§©‰Ωì„ÅÆÂãï„Åç„Å®Êï∞Áßò„Åã„Çâ„ÅÇ„Å™„Åü„ÅÆÈÅãÂã¢„Å®ÊÄßÊ†º„ÇíÁ∑èÂêàÁöÑ„Å´Ë™≠„ÅøËß£„Åç„Åæ„Åô</p>
        </div>

        <div class="card">
            <form id="fortuneForm">
                <div class="form-group">
                    <label class="form-label">üìÖ ÂÆåÂÖ®„Å™ÁîüÂπ¥ÊúàÊó•„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ</label>
                    <div class="form-row">
                        <input type="number" id="year" class="form-input" placeholder="Âπ¥ (‰æã: 1990)" min="1900" max="2025" required>
                        <select id="month" class="form-select" required>
                            <option value="">Êúà„ÇíÈÅ∏Êäû</option>
                            <option value="1">1Êúà</option>
                            <option value="2">2Êúà</option>
                            <option value="3">3Êúà</option>
                            <option value="4">4Êúà</option>
                            <option value="5">5Êúà</option>
                            <option value="6">6Êúà</option>
                            <option value="7">7Êúà</option>
                            <option value="8">8Êúà</option>
                            <option value="9">9Êúà</option>
                            <option value="10">10Êúà</option>
                            <option value="11">11Êúà</option>
                            <option value="12">12Êúà</option>
                        </select>
                        <select id="day" class="form-select" required>
                            <option value="">Êó•„ÇíÈÅ∏Êäû</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">üïê Âá∫ÁîüÊôÇÂàª„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºàÂàÜ„Åã„Çâ„Å™„ÅÑÂ†¥Âêà„ÅØ12:00„ÅßOKÔºâ</label>
                    <div class="form-row">
                        <select id="hour" class="form-select" required>
                            <option value="">ÊôÇ„ÇíÈÅ∏Êäû</option>
                        </select>
                        <select id="minute" class="form-select" required>
                            <option value="">ÂàÜ„ÇíÈÅ∏Êäû</option>
                        </select>
                    </div>
                </div>

                <div style="text-align: center;">
                    <button type="submit" class="btn">üåü Â§©‰Ωì‰ΩçÁΩÆ„ÇíË™ø„Åπ„Å¶Âç†„ÅÜ üåü</button>
                </div>
            </form>
        </div>

        <div id="loadingCard" class="card loading" style="display: none;">
            <div class="spinner"></div>
            <p>Â§©‰Ωì„ÅÆ‰ΩçÁΩÆ„ÇíË®àÁÆó‰∏≠...<br>ÂÆáÂÆô„Åã„Çâ„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂèó‰ø°„Åó„Å¶„ÅÑ„Åæ„Åô‚ú®</p>
        </div>

        <div id="resultCard" class="card result-card">
            <div id="zodiacSymbol" class="zodiac-symbol"></div>
            <div id="zodiacName" class="zodiac-name"></div>
            
            <div style="text-align: center; margin-bottom: 20px; padding: 15px; background: rgba(248, 240, 242, 0.5); border-radius: 10px;">
                <div style="font-size: 0.9rem; color: #8B4B6B; font-style: italic;">
                    ‚ú® Â§©‰Ωì„ÅÆÂãï„Åç„Å®Êï∞ÁßòË°ì„Åß„ÅÇ„Å™„Åü„ÇíÁ∑èÂêàÁöÑ„Å´ÂàÜÊûê„Åó„Å¶„ÅÑ„Åæ„Åô ‚ú®
                </div>
            </div>

            <div class="fortune-section">
                <div class="fortune-title">üåü ‰ªäÊó•„ÅÆÁ∑èÂêàÈÅãÂã¢</div>
                <div id="overallFortune" class="fortune-content"></div>
            </div>

            <div class="fortune-section">
                <div class="fortune-title">üíï ÊÅãÊÑõÈÅã</div>
                <div id="loveFortune" class="fortune-content"></div>
            </div>

            <div class="fortune-section">
                <div class="fortune-title">üíº ‰ªï‰∫ãÈÅã„ÉªÈáëÈÅã</div>
                <div id="workFortune" class="fortune-content"></div>
            </div>

            <div class="fortune-section">
                <div class="fortune-title">üåø ÂÅ•Â∫∑ÈÅã</div>
                <div id="healthFortune" class="fortune-content"></div>
            </div>

            <div class="lucky-info">
                <div class="lucky-item">
                    <div class="lucky-label">üé® „É©„ÉÉ„Ç≠„Éº„Ç´„É©„Éº</div>
                    <div id="luckyColor" class="lucky-value"></div>
                </div>
                <div class="lucky-item">
                    <div class="lucky-label">üî¢ „É©„ÉÉ„Ç≠„Éº„Éä„É≥„Éê„Éº</div>
                    <div id="luckyNumber" class="lucky-value"></div>
                </div>
            </div>

            <div class="fortune-section">
                <div class="fortune-title">üíå ‰ªäÊó•„ÅÆ„Ç¢„Éâ„Éê„Ç§„Çπ</div>
                <div id="advice" class="fortune-content"></div>
            </div>

            <!-- Êï∞ÁßòË°ì„Çª„ÇØ„Ç∑„Éß„É≥ -->
            <div class="fortune-section" style="background: linear-gradient(135deg, rgba(255, 240, 245, 0.8), rgba(255, 228, 225, 0.8)); border-left: 5px solid #E8A4C4;">
                <div class="fortune-title">üî¢ Êï∞ÁßòË°ì„Åã„Çâ„ÅÆÊ¥ûÂØü</div>
                
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #8B4B6B; margin-bottom: 10px;">üìã „ÅÇ„Å™„Åü„ÅÆÂü∫Êú¨ÊÄßÊ†º („É©„Ç§„Éï„Éë„Çπ: <span id="lifePathNumber"></span>)</h4>
                    <div id="personalityDescription" class="fortune-content" style="font-size: 0.95rem;"></div>
                    <div style="margin-top: 8px; font-size: 0.9rem;">
                        <strong style="color: #A0657A;">Âº∑„Åø:</strong> <span id="personalityStrengths"></span><br>
                        <strong style="color: #A0657A;">Ë™≤È°å:</strong> <span id="personalityChallenges"></span>
                    </div>
                </div>

                <div style="margin-bottom: 15px;">
                    <h4 style="color: #8B4B6B; margin-bottom: 8px;">üìÖ ‰ªäÊó•„ÅÆÊï∞Áßò („Éë„Éº„ÇΩ„Éä„É´„Éá„Ç§: <span id="personalDayNumber"></span>)</h4>
                    <div id="personalDayMessage" class="fortune-content" style="font-size: 0.95rem;"></div>
                </div>

                <div style="margin-bottom: 15px;">
                    <h4 style="color: #8B4B6B; margin-bottom: 8px;">üóìÔ∏è ‰ªäÊúà„ÅÆÊï∞Áßò („Éë„Éº„ÇΩ„Éä„É´„Éû„É≥„Çπ: <span id="personalMonthNumber"></span>)</h4>
                    <div id="personalMonthMessage" class="fortune-content" style="font-size: 0.95rem;"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ÊòüÂ∫ß„ÅÆÂü∫Êú¨„Éá„Éº„Çø
        const zodiacData = {
            '„Åä„Å≤„Å§„ÅòÂ∫ß': { symbol: '‚ôà', dates: [[3, 21], [4, 19]] },
            '„Åä„ÅÜ„ÅóÂ∫ß': { symbol: '‚ôâ', dates: [[4, 20], [5, 20]] },
            '„Åµ„Åü„ÅîÂ∫ß': { symbol: '‚ôä', dates: [[5, 21], [6, 21]] },
            '„Åã„Å´Â∫ß': { symbol: '‚ôã', dates: [[6, 22], [7, 22]] },
            '„Åó„ÅóÂ∫ß': { symbol: '‚ôå', dates: [[7, 23], [8, 22]] },
            '„Åä„Å®„ÇÅÂ∫ß': { symbol: '‚ôç', dates: [[8, 23], [9, 22]] },
            '„Å¶„Çì„Å≥„ÇìÂ∫ß': { symbol: '‚ôé', dates: [[9, 23], [10, 23]] },
            '„Åï„Åù„ÇäÂ∫ß': { symbol: '‚ôè', dates: [[10, 24], [11, 22]] },
            '„ÅÑ„Å¶Â∫ß': { symbol: '‚ôê', dates: [[11, 23], [12, 21]] },
            '„ÇÑ„ÅéÂ∫ß': { symbol: '‚ôë', dates: [[12, 22], [12, 31]], extra: [[1, 1], [1, 19]] },
            '„Åø„Åö„Åå„ÇÅÂ∫ß': { symbol: '‚ôí', dates: [[1, 20], [2, 18]] },
            '„ÅÜ„ÅäÂ∫ß': { symbol: '‚ôì', dates: [[2, 19], [3, 20]] }
        };

        // Âç†ÊòüË°ìËß£Èáà„Éá„Éº„Çø„Éô„Éº„Çπ
        const astroInterpretations = {
            // Â§™ÈôΩ„ÅÆÊòüÂ∫ßÂà•Ëß£ÈáàÔºàÁ∑èÂêàÈÅãÂã¢Ôºâ
            sun: {
                'Áâ°ÁæäÂ∫ß': 'Á©çÊ•µÁöÑ„ÅßË°åÂãïÂäõ„Å´Ê∫Ä„Å°„Åü„Ç®„Éç„É´„ÇÆ„Éº„ÅåÂº∑„Åè„ÄÅÊñ∞„Åó„ÅÑ„ÉÅ„É£„É¨„É≥„Ç∏„Å´Âêë„ÅÑ„ÅüÊôÇÊúü„Åß„Åô„ÄÇ',
                'Áâ°ÁâõÂ∫ß': 'ÂÆâÂÆö„ÇíÊ±Ç„ÇÅ„ÇãÊ∞óÊåÅ„Å°„ÅåÈ´ò„Åæ„Çä„ÄÅÁ¢∫ÂÆü„Å™ÊàêÊûú„ÇíÊ±Ç„ÇÅ„ÇãÂÇæÂêë„Å´„ÅÇ„Çä„Åæ„Åô„ÄÇ',
                'ÂèåÂ≠êÂ∫ß': '„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥ËÉΩÂäõ„ÅåÊ¥ªÁô∫„Å´„Å™„Çä„ÄÅÂ§öÊñπÈù¢„Åß„ÅÆÊ¥ªÂãï„ÅåÊúüÂæÖ„Åß„Åç„Åæ„Åô„ÄÇ',
                'ËüπÂ∫ß': 'ÊÑüÊÉÖÁöÑ„Å™Ê∑±„Åï„Å®ÂÆ∂Â∫≠ÁöÑ„Å™Ê∏©„Åã„Åï„ÅåÂº∑Ë™ø„Åï„Çå„ÇãÊôÇÊúü„Åß„Åô„ÄÇ',
                'ÁçÖÂ≠êÂ∫ß': 'Ëá™Â∑±Ë°®ÁèæÂäõ„Å®ÂâµÈÄ†ÊÄß„ÅåÈ´ò„Åæ„Çä„ÄÅÊ≥®ÁõÆ„ÇíÈõÜ„ÇÅ„ÇÑ„Åô„ÅÑÊôÇ„Åß„Åô„ÄÇ',
                '‰πôÂ•≥Â∫ß': 'Á¥∞„Åã„ÅÑ‰ΩúÊ•≠„ÇÑÂàÜÊûêÁöÑ„Å™ÊÄùËÄÉ„ÅåÂæóÊÑè„Å´„Å™„ÇãÂÆüÂãôÁöÑ„Å™ÊôÇÊúü„Åß„Åô„ÄÇ',
                'Â§©Áß§Â∫ß': '„Éê„É©„É≥„ÇπÊÑüË¶ö„Å®ÁæéÁöÑ„Çª„É≥„Çπ„ÅåÂÖâ„Çä„ÄÅË™øÂíå„ÇíÈáçË¶ñ„Åô„ÇãÊôÇÊúü„Åß„Åô„ÄÇ',
                'Ë†çÂ∫ß': 'Ê∑±„ÅÑÊ¥ûÂØüÂäõ„Å®ÈõÜ‰∏≠Âäõ„ÅåÂ¢ó„Åó„ÄÅÊú¨Ë≥™„ÇíË¶ãÊäú„ÅèÂäõ„ÅåÂº∑„Åæ„Çä„Åæ„Åô„ÄÇ',
                'Â∞ÑÊâãÂ∫ß': 'ÂÜíÈô∫ÂøÉ„Å®Â≠¶ÁøíÊÑèÊ¨≤„ÅåÈ´ò„Åæ„Çä„ÄÅË¶ñÈáé„ÇíÂ∫É„Åí„ÇãÁµ∂Â•Ω„ÅÆÊ©ü‰ºö„Åß„Åô„ÄÇ',
                'Â±±ÁæäÂ∫ß': 'Ë≤¨‰ªªÊÑü„Å®ÁõÆÊ®ôÈÅîÊàê„Å∏„ÅÆÊÑèË≠ò„ÅåÂº∑„Åæ„ÇãÂÆüË∑µÁöÑ„Å™ÊôÇÊúü„Åß„Åô„ÄÇ',
                'Ê∞¥Áì∂Â∫ß': 'Áã¨ÂâµÊÄß„Å®Èù©Êñ∞ÁöÑ„Å™„Ç¢„Ç§„Éá„Ç¢„ÅåÊπß„ÅçÂá∫„ÇãÂâµÈÄ†ÁöÑ„Å™ÊôÇÊúü„Åß„Åô„ÄÇ',
                'È≠öÂ∫ß': 'Áõ¥ÊÑüÂäõ„Å®Ëä∏Ë°ìÁöÑÊÑüÊÄß„ÅåÈ´ò„Åæ„ÇãÊÑüÂèóÊÄßË±ä„Åã„Å™ÊôÇÊúü„Åß„Åô„ÄÇ'
            },
            // ÈáëÊòü„ÅÆÊòüÂ∫ßÂà•Ëß£ÈáàÔºàÊÅãÊÑõÈÅãÔºâ
            venus: {
                'Áâ°ÁæäÂ∫ß': 'ÊÉÖÁÜ±ÁöÑ„ÅßÁ©çÊ•µÁöÑ„Å™„Ç¢„Éó„É≠„Éº„ÉÅ„ÅåÊÅãÊÑõ„Å´ÂäπÊûúÁöÑ„ÄÇÊñ∞„Åó„ÅÑÂá∫‰ºö„ÅÑ„Å´„ÇÇÊúüÂæÖÂ§ß„Åß„Åô„ÄÇ',
                'Áâ°ÁâõÂ∫ß': 'ÂÆâÂÆö„Åó„ÅüÊÑõÊÉÖÈñ¢‰øÇ„ÇíÁØâ„Åç„ÇÑ„Åô„Åè„ÄÅ‰∫îÊÑü„Çí‰Ωø„Å£„ÅüÊÑõ„ÅÆË°®Áèæ„ÅåÂç∞Ë±°ÁöÑ„Åß„Åô„ÄÇ',
                'ÂèåÂ≠êÂ∫ß': 'Áü•ÁöÑ„Å™‰ºöË©±„ÇÑËªΩ„ÇÑ„Åã„Å™„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥„ÅåÊÅãÊÑõ„ÅÆÈçµ„Å®„Å™„Çä„Åæ„Åô„ÄÇ',
                'ËüπÂ∫ß': 'ÂÆ∂Â∫≠ÁöÑ„ÅßÂåÖÂÆπÂäõ„ÅÆ„ÅÇ„ÇãÊÑõÊÉÖ„ÅåÁõ∏Êâã„ÅÆÂøÉ„ÇíÊ∏©„ÇÅ„ÄÅÊ∑±„ÅÑÁµÜ„ÇíÁØâ„Åë„Åæ„Åô„ÄÇ',
                'ÁçÖÂ≠êÂ∫ß': 'ËèØ„ÇÑ„Åã„ÅßÈ≠ÖÂäõÁöÑ„Å™Ëá™Â∑±Ë°®Áèæ„ÅåÊÅãÊÑõÈÅã„ÇíÈ´ò„ÇÅ„ÇãÊôÇÊúü„Åß„Åô„ÄÇ',
                '‰πôÂ•≥Â∫ß': 'Ë™†ÂÆü„ÅßÁ¥∞„ÇÑ„Åã„Å™Ê∞óÈÖç„Çä„ÅåÁõ∏Êâã„Å´Â•ΩÂç∞Ë±°„Çí‰∏é„Åà„ÇãÁ©è„ÇÑ„Åã„Å™ÊÅãÊÑõÊúü„Åß„Åô„ÄÇ',
                'Â§©Áß§Â∫ß': '‰∏äÂìÅ„ÅßÊ¥óÁ∑¥„Åï„Çå„ÅüÈ≠ÖÂäõ„ÅåËºù„Åç„ÄÅÁæé„Åó„ÅÑ„ÇÇ„ÅÆ„ÇíÂÖ±Êúâ„Åô„ÇãÊÅãÊÑõ„ÅåÁêÜÊÉ≥ÁöÑ„Åß„Åô„ÄÇ',
                'Ë†çÂ∫ß': 'Ê∑±„ÅèÊÉÖÁÜ±ÁöÑ„Å™ÊÑõÊÉÖ„ÅßÁõ∏Êâã„ÇíÈ≠Ö‰∫Ü„Åó„ÄÅÈÅãÂëΩÁöÑ„Å™Âá∫‰ºö„ÅÑ„ÅÆÂèØËÉΩÊÄß„ÇÇ„ÅÇ„Çä„Åæ„Åô„ÄÇ',
                'Â∞ÑÊâãÂ∫ß': 'Ëá™Áî±„ÅßÈñãÊîæÁöÑ„Å™Èñ¢‰øÇÊÄß„ÇíÂ•Ω„Åø„ÄÅ‰∏ÄÁ∑í„Å´ÂÜíÈô∫„Åß„Åç„Çã„Éë„Éº„Éà„Éä„Éº„Å®„ÅÆÁ∏Å„ÅåÊ∑±„Åæ„Çä„Åæ„Åô„ÄÇ',
                'Â±±ÁæäÂ∫ß': 'ÁúüÈù¢ÁõÆ„ÅßÈï∑ÊúüÁöÑ„Å™Ë¶ñÁÇπ„Åß„ÅÆÊÅãÊÑõÈñ¢‰øÇ„ÇíÁØâ„Åç„ÇÑ„Åô„ÅÑÂÆâÂÆöÊúü„Åß„Åô„ÄÇ',
                'Ê∞¥Áì∂Â∫ß': '„É¶„Éã„Éº„ÇØ„ÅßÂèãÈÅî„ÅÆ„Çà„ÅÜ„Å™Èñ¢‰øÇ„Åã„ÇâÂßã„Åæ„ÇãÊÅãÊÑõ„Å´Áô∫Â±ï„Åó„ÇÑ„Åô„ÅÑÊôÇÊúü„Åß„Åô„ÄÇ',
                'È≠öÂ∫ß': '„É≠„Éû„É≥„ÉÅ„ÉÉ„ÇØ„ÅßÂ§¢Ë¶ã„Åå„Å°„Å™ÊÅãÊÑõË¶≥„ÅåÂº∑„Åæ„Çä„ÄÅÁêÜÊÉ≥ÁöÑ„Å™ÊÑõ„ÇíÊ±Ç„ÇÅ„ÇãÂÇæÂêë„Å´„ÅÇ„Çä„Åæ„Åô„ÄÇ'
            },
            // ÁÅ´Êòü„ÅÆÊòüÂ∫ßÂà•Ëß£ÈáàÔºà‰ªï‰∫ãÈÅã„ÉªË°åÂãïÂäõÔºâ
            mars: {
                'Áâ°ÁæäÂ∫ß': 'Ë°åÂãïÂäõ„Å®Ê±∫Êñ≠Âäõ„ÅåÊúÄÈ´òÊΩÆ„Å´ÈÅî„Åó„ÄÅ„É™„Éº„ÉÄ„Éº„Ç∑„ÉÉ„Éó„ÇíÁô∫ÊèÆ„Åß„Åç„ÇãÊôÇÊúü„Åß„Åô„ÄÇ',
                'Áâ°ÁâõÂ∫ß': 'ÁùÄÂÆü„ÅßÁ≤ò„ÇäÂº∑„ÅÑÂä™Âäõ„ÅåÂÆü„ÇíÁµê„Å≥„ÄÅÁ¢∫ÂÆü„Å™ÊàêÊûú„Çí‰∏ä„Åí„Çâ„Çå„Åæ„Åô„ÄÇ',
                'ÂèåÂ≠êÂ∫ß': 'Â§öÊñπÈù¢„Åß„ÅÆÊ¥ªÂãï„ÇÑÊÉÖÂ†±ÂèéÈõÜËÉΩÂäõ„Åå‰ªï‰∫ã„Å´Ê¥ª„Åã„Åï„Çå„ÇãÊôÇÊúü„Åß„Åô„ÄÇ',
                'ËüπÂ∫ß': '„ÉÅ„Éº„É†„ÉØ„Éº„ÇØ„ÇíÂ§ßÂàá„Å´„Åó„ÄÅ‰∫∫„Çí„Çµ„Éù„Éº„Éà„Åô„ÇãËÉΩÂäõ„ÅåË©ï‰æ°„Åï„Çå„Åæ„Åô„ÄÇ',
                'ÁçÖÂ≠êÂ∫ß': 'ÂâµÈÄ†ÁöÑ„Å™„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇÑË°®ÁèæÂäõ„ÇíÊ¥ª„Åã„Åó„Åü‰ªï‰∫ã„ÅßÂäõ„ÇíÁô∫ÊèÆ„Åó„Åæ„Åô„ÄÇ',
                '‰πôÂ•≥Â∫ß': 'ÂàÜÊûêÂäõ„Å®ÂÆåÁíß‰∏ªÁæ©ÁöÑ„Å™Âèñ„ÇäÁµÑ„Åø„ÅåËÅ∑Â†¥„ÅßÈáçÂÆù„Åï„Çå„ÇãÊôÇÊúü„Åß„Åô„ÄÇ',
                'Â§©Áß§Â∫ß': 'Ë™øÊï¥ËÉΩÂäõ„Å®ÁæéÁöÑ„Çª„É≥„Çπ„ÇíÊ¥ª„Åã„Åó„Åü‰ªï‰∫ã„ÅßÊàêÂäü„ÇíÂèé„ÇÅ„Çâ„Çå„Åæ„Åô„ÄÇ',
                'Ë†çÂ∫ß': 'ÈõÜ‰∏≠Âäõ„Å®Êé¢Á©∂ÂøÉ„ÇíÊ¥ª„Åã„Åó„ÄÅÊ∑±„ÅèÊéò„Çä‰∏ã„Åí„ÇãÁ†îÁ©∂ÁöÑ„Å™‰ªï‰∫ã„Å´Âêë„ÅÑ„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
                'Â∞ÑÊâãÂ∫ß': 'ÂõΩÈöõÁöÑ„Å™Ë¶ñÈáé„ÇÑÊïôËÇ≤ÁöÑ„Å™ÂàÜÈáé„Åß„ÅÆÊ¥ªÂãï„ÅåÊ¥ªÁô∫„Å´„Å™„ÇãÊôÇÊúü„Åß„Åô„ÄÇ',
                'Â±±ÁæäÂ∫ß': 'ÁµÑÁπî„Åß„ÅÆÂú∞‰ΩçÂêë‰∏ä„ÇÑÈï∑ÊúüÁöÑ„Å™„Ç≠„É£„É™„Ç¢ÊßãÁØâ„Å´ÊúÄÈÅ©„Å™ÊôÇÊúü„Åß„Åô„ÄÇ',
                'Ê∞¥Áì∂Â∫ß': 'Èù©Êñ∞ÁöÑ„Å™„Ç¢„Ç§„Éá„Ç¢„ÇÑ„ÉÅ„Éº„É†„Åß„ÅÆÂçîÂÉç„Åå‰ªï‰∫ã„ÅÆÊàêÂäü„Å´„Å§„Å™„Åå„Çä„Åæ„Åô„ÄÇ',
                'È≠öÂ∫ß': 'Áõ¥ÊÑüÂäõ„ÇíÊ¥ª„Åã„Åó„ÅüÂâµ‰ΩúÊ¥ªÂãï„ÇÑ„Çµ„Éº„Éì„ÇπÊ•≠„ÅßËÉΩÂäõ„ÇíÁô∫ÊèÆ„Åß„Åç„Åæ„Åô„ÄÇ'
            },
            // Êúà„ÅÆÊòüÂ∫ßÂà•Ëß£ÈáàÔºàÂÅ•Â∫∑ÈÅã„ÉªÂÜÖÈù¢Ôºâ
            moon: {
                'Áâ°ÁæäÂ∫ß': 'Ê¥ªÂäõ„Å´Ê∫Ä„Å°„Å¶„ÅÑ„Åæ„Åô„Åå„ÄÅÈ†≠ÈÉ®„ÇÑÁõÆ„ÅÆÁñ≤„Çå„Å´Ê≥®ÊÑè„ÄÇÈÅ©Â∫¶„Å™‰ºëÊÅØ„ÇíÂøÉ„Åå„Åë„Å¶„ÄÇ',
                'Áâ°ÁâõÂ∫ß': '‰ΩìË™ø„ÅØÂÆâÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô„Åå„ÄÅÈ¶ñ„ÇÑÂñâ„ÅÆ‰∏çË™ø„Å´Ê∞ó„Çí‰ªò„Åë„Åæ„Åó„Çá„ÅÜ„ÄÇ',
                'ÂèåÂ≠êÂ∫ß': 'Á•ûÁµå„ÅåÊïèÊÑü„Å´„Å™„Çä„Åå„Å°„ÄÇÂëºÂê∏Âô®Á≥ª„ÅÆÂÅ•Â∫∑„Å®ÂçÅÂàÜ„Å™Áù°Áú†„ÅåÂ§ßÂàá„Åß„Åô„ÄÇ',
                'ËüπÂ∫ß': 'Ê∂àÂåñÂô®Á≥ª„ÅÆË™øÂ≠ê„Å´Ê≥¢„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÈ£ü‰∫ã„ÅÆ„Éê„É©„É≥„Çπ„Å®Ê∞¥ÂàÜË£úÁµ¶„ÇíÊÑèË≠ò„Åó„Å¶„ÄÇ',
                'ÁçÖÂ≠êÂ∫ß': 'ÂøÉËáì„ÇÑËÉå‰∏≠„ÅÆÂÅ•Â∫∑„Å´Ê≥®ÊÑè„ÄÇË¶èÂâáÊ≠£„Åó„ÅÑÁîüÊ¥ª„É™„Ç∫„É†„ÅåÈáçË¶Å„Åß„Åô„ÄÇ',
                '‰πôÂ•≥Â∫ß': 'ËÖ∏„ÅÆÂÅ•Â∫∑„ÇíÊÑèË≠ò„Åó„ÅüÈ£üÁîüÊ¥ª„Çí„ÄÇÂÆåÁíß‰∏ªÁæ©„Å´„Çà„Çã„Çπ„Éà„É¨„Çπ„Å´„ÇÇÊ≥®ÊÑè„ÅåÂøÖË¶Å„ÄÇ',
                'Â§©Áß§Â∫ß': 'ËÖéËáì„ÇÑËÇå„ÅÆË™øÂ≠ê„Å´Ê∞ó„ÇíÈÖç„Å£„Å¶„ÄÇ„Éê„É©„É≥„Çπ„ÅÆÂèñ„Çå„ÅüÁîüÊ¥ª„ÇíÂøÉ„Åå„Åë„Åæ„Åó„Çá„ÅÜ„ÄÇ',
                'Ë†çÂ∫ß': 'ÁîüÊÆñÂô®Á≥ª„ÇÑÂÖçÁñ´Âäõ„Å´Ê≥®ÊÑè„ÄÇ„Éá„Éà„ÉÉ„ÇØ„Çπ„ÇíÊÑèË≠ò„Åó„ÅüÁîüÊ¥ª„ÅåÂäπÊûúÁöÑ„Åß„Åô„ÄÇ',
                'Â∞ÑÊâãÂ∫ß': 'Ë∂≥ËÖ∞„ÅÆÂÅ•Â∫∑„Å®ËÇùËáì„ÅÆÂÉç„Åç„Å´Ê≥®ÊÑè„ÄÇÈÅ©Â∫¶„Å™ÈÅãÂãï„Åß‰ΩìÂäõÁ∂≠ÊåÅ„Çí„ÄÇ',
                'Â±±ÁæäÂ∫ß': 'È™®„ÇÑÈñ¢ÁØÄ„ÄÅÊ≠Ø„ÅÆÂÅ•Â∫∑ÁÆ°ÁêÜ„ÅåÈáçË¶Å„ÄÇ„Ç´„É´„Ç∑„Ç¶„É†„ÅÆÊëÇÂèñ„ÇíÊÑèË≠ò„Åó„Å¶„ÄÇ',
                'Ê∞¥Áì∂Â∫ß': 'Ë°ÄË°å‰øÉÈÄ≤„Å®Ë∂≥È¶ñ„ÅÆÂÅ•Â∫∑„Å´Ê≥®ÊÑè„ÄÇÊñ∞„Åó„ÅÑÂÅ•Â∫∑Ê≥ï„ÇíË©¶„Åô„ÅÆ„ÇÇËâØ„ÅÑ„Åß„Åó„Çá„ÅÜ„ÄÇ',
                'È≠öÂ∫ß': 'Ë∂≥„ÇÑÂÖçÁñ´Á≥ª„ÅÆÂÅ•Â∫∑„Å´Ê∞ó„Çí‰ªò„Åë„Å¶„ÄÇÂøÉ„ÅÆÂÅ•Â∫∑„ÇÇÂêå„Åò„Çà„ÅÜ„Å´Â§ßÂàá„Å´„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ'
            }
        };

        // Êï∞ÁßòË°ì„Ç∑„Çπ„ÉÜ„É†
        const numerologySystem = {
            // „É©„Ç§„Éï„Éë„Çπ„Éä„É≥„Éê„Éº„ÅÆË®àÁÆó
            calculateLifePath: function(birthDate) {
                const year = birthDate.getFullYear();
                const month = birthDate.getMonth() + 1;
                const day = birthDate.getDate();
                
                // ÂêÑË¶ÅÁ¥†„Çí‰∏ÄÊ°Å„Å´„Å™„Çã„Åæ„ÅßË∂≥„ÅóÂêà„Çè„Åõ„Çã
                const sumDigits = (num) => {
                    while (num > 9 && num !== 11 && num !== 22 && num !== 33) {
                        num = String(num).split('').reduce((sum, digit) => sum + parseInt(digit), 0);
                    }
                    return num;
                };
                
                const yearSum = sumDigits(year);
                const monthSum = sumDigits(month);
                const daySum = sumDigits(day);
                
                return sumDigits(yearSum + monthSum + daySum);
            },
            
            // „Éá„Ç£„Çπ„ÉÜ„Ç£„Éã„Éº„Éä„É≥„Éê„ÉºÔºàÈÅãÂëΩÊï∞Ôºâ„ÅÆË®àÁÆóÔºà„Éï„É´„Éç„Éº„É†Ôºâ
            calculateDestiny: function(birthDate) {
                // ÁîüÂπ¥ÊúàÊó•„Åã„ÇâÁ∞°ÊòìÁöÑ„Å´ÁÆóÂá∫
                const sum = birthDate.getFullYear() + (birthDate.getMonth() + 1) + birthDate.getDate();
                return this.reduceToSingle(sum);
            },
            
            // „ÇΩ„Ç¶„É´„Éä„É≥„Éê„Éº„ÅÆË®àÁÆóÔºàÂÜÖÈù¢„ÅÆÊ¨≤Ê±ÇÔºâ
            calculateSoul: function(birthDate) {
                // ÊôÇÂàª„Çí‰ΩøÁî®„Åó„Å¶„ÇΩ„Ç¶„É´„Éä„É≥„Éê„Éº„ÇíÁÆóÂá∫
                const hour = birthDate.getHours();
                const minute = birthDate.getMinutes();
                const sum = hour + minute + birthDate.getDate();
                return this.reduceToSingle(sum);
            },
            
            // „Éë„Éº„ÇΩ„Éä„É´„Ç§„É§„Éº„Éä„É≥„Éê„ÉºÔºà‰ªäÂπ¥„ÅÆÈÅãÂã¢Ôºâ
            calculatePersonalYear: function(birthDate, currentYear = new Date().getFullYear()) {
                const month = birthDate.getMonth() + 1;
                const day = birthDate.getDate();
                const sum = month + day + this.reduceToSingle(currentYear);
                return this.reduceToSingle(sum);
            },
            
            // „Éë„Éº„ÇΩ„Éä„É´„Éû„É≥„Çπ„Éä„É≥„Éê„ÉºÔºà‰ªäÊúà„ÅÆÈÅãÂã¢Ôºâ
            calculatePersonalMonth: function(birthDate, currentDate = new Date()) {
                const personalYear = this.calculatePersonalYear(birthDate, currentDate.getFullYear());
                const currentMonth = currentDate.getMonth() + 1;
                return this.reduceToSingle(personalYear + currentMonth);
            },
            
            // „Éë„Éº„ÇΩ„Éä„É´„Éá„Ç§„Éä„É≥„Éê„ÉºÔºà‰ªäÊó•„ÅÆÈÅãÂã¢Ôºâ
            calculatePersonalDay: function(birthDate, currentDate = new Date()) {
                const personalMonth = this.calculatePersonalMonth(birthDate, currentDate);
                const currentDay = currentDate.getDate();
                return this.reduceToSingle(personalMonth + currentDay);
            },
            
            // Êï∞Â≠ó„Çí‰∏ÄÊ°Å„Å´ÈÇÑÂÖÉ
            reduceToSingle: function(num) {
                while (num > 9 && num !== 11 && num !== 22 && num !== 33) {
                    num = String(num).split('').reduce((sum, digit) => sum + parseInt(digit), 0);
                }
                return num;
            }
        };

        // Êï∞ÁßòË°ìËß£Èáà„Éá„Éº„Çø„Éô„Éº„Çπ
        const numerologyInterpretations = {
            lifePath: {
                1: {
                    personality: '„É™„Éº„ÉÄ„Éº„Ç∑„ÉÉ„Éó„Å´Èï∑„Åë„ÅüÈñãÊãìËÄÖ„Çø„Ç§„Éó„ÄÇÁã¨Á´ãÂøÉ„ÅåÂº∑„Åè„ÄÅÊñ∞„Åó„ÅÑ„Åì„Å®„Å´ÊåëÊà¶„Åô„Çã„Åì„Å®„ÇíÂ•Ω„Åø„Åæ„Åô„ÄÇ',
                    strengths: 'Ê±∫Êñ≠Âäõ„ÄÅÁã¨ÂâµÊÄß„ÄÅÁ©çÊ•µÊÄß',
                    challenges: 'Êàë„ÅåÂº∑„Åô„Åé„Çã„Åì„Å®„ÄÅÂçîË™øÊÄß„ÅÆÊ¨†Â¶Ç'
                },
                2: {
                    personality: 'ÂçîË™øÊÄß„Å®Â§ñ‰∫§ËÉΩÂäõ„Å´ÂÑ™„Çå„ÅüÂπ≥Âíå‰∏ªÁæ©ËÄÖ„ÄÇ‰∫∫„Å®„ÅÆ„Å§„Å™„Åå„Çä„ÇíÂ§ßÂàá„Å´„Åó„ÄÅË™øÂíå„ÇíÈáçË¶ñ„Åó„Åæ„Åô„ÄÇ',
                    strengths: 'ÂçîÂäõÊÄß„ÄÅÊÑüÂèóÊÄß„ÄÅ„Éê„É©„É≥„ÇπÊÑüË¶ö',
                    challenges: 'ÂÑ™Êüî‰∏çÊñ≠„ÄÅËá™‰ø°‰∏çË∂≥'
                },
                3: {
                    personality: 'ÂâµÈÄ†ÊÄß„Å®„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥ËÉΩÂäõ„Å´Èï∑„Åë„ÅüË°®ÁèæËÄÖ„ÄÇËä∏Ë°ìÁöÑÊâçËÉΩ„Åå„ÅÇ„Çä„ÄÅ‰∫∫„ÇíÊ•Ω„Åó„Åæ„Åõ„Çã„Åì„Å®„ÅåÂæóÊÑè„Åß„Åô„ÄÇ',
                    strengths: 'ÂâµÈÄ†Âäõ„ÄÅË°®ÁèæÂäõ„ÄÅÊ•ΩË¶≥ÊÄß',
                    challenges: 'ÈõÜ‰∏≠Âäõ‰∏çË∂≥„ÄÅÊµ™Ë≤ªÂÇæÂêë'
                },
                4: {
                    personality: 'Â†ÖÂÆü„ÅßË≤¨‰ªªÊÑü„ÅÆÂº∑„ÅÑÁµÑÁπîËÄÖ„Çø„Ç§„Éó„ÄÇË®àÁîªÊÄß„Åå„ÅÇ„Çä„ÄÅ„Ç≥„ÉÑ„Ç≥„ÉÑ„Å®Âä™Âäõ„ÇíÁ©ç„ÅøÈáç„Å≠„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ',
                    strengths: 'Â†ÖÂÆüÊÄß„ÄÅÁµÑÁπîÂäõ„ÄÅÂøçËÄêÂäõ',
                    challenges: 'È†ëÂõ∫„Åï„ÄÅÂ§âÂåñ„Å∏„ÅÆÊäµÊäó'
                },
                5: {
                    personality: 'Ëá™Áî±„ÇíÊÑõ„Åô„ÇãÂÜíÈô∫ÂÆ∂„Çø„Ç§„Éó„ÄÇÂ§âÂåñ„Å®Âà∫ÊøÄ„ÇíÊ±Ç„ÇÅ„ÄÅÂ§öÊßò„Å™ÁµåÈ®ì„ÇíÈÄö„Åò„Å¶ÊàêÈï∑„Åó„Åæ„Åô„ÄÇ',
                    strengths: 'ÈÅ©ÂøúÂäõ„ÄÅÂ•ΩÂ•áÂøÉ„ÄÅËá™Áî±„Åï',
                    challenges: 'È£Ω„Åç„Å£„ÅΩ„Åï„ÄÅË≤¨‰ªªÂõûÈÅø'
                },
                6: {
                    personality: 'ÊÑõÊÉÖÊ∑±„ÅÑ‰∏ñË©±Â•Ω„Åç„Çø„Ç§„Éó„ÄÇÂÆ∂Êóè„ÇÑÂèã‰∫∫„ÇíÂ§ßÂàá„Å´„Åó„ÄÅ‰ªñ‰∫∫„ÅÆ„Åü„ÇÅ„Å´Â∞Ω„Åè„Åô„Åì„Å®„Å´Âñú„Å≥„ÇíÊÑü„Åò„Åæ„Åô„ÄÇ',
                    strengths: 'ÊÄù„ÅÑ„ÇÑ„Çä„ÄÅË≤¨‰ªªÊÑü„ÄÅÁæéÁöÑ„Çª„É≥„Çπ',
                    challenges: 'ÈÅé‰øùË≠∑„ÄÅÂøÉÈÖçÊÄß'
                },
                7: {
                    personality: 'ÂÜÖÁúÅÁöÑ„ÅßÁ≤æÁ•ûÊÄß„ÇíÈáçË¶ñ„Åô„ÇãÊé¢Ê±ÇËÄÖ„Çø„Ç§„Éó„ÄÇÊ∑±„ÅèËÄÉ„Åà„ÄÅÁúüÁêÜ„ÇíËøΩÊ±Ç„Åô„Çã„Åì„Å®„ÇíÂ•Ω„Åø„Åæ„Åô„ÄÇ',
                    strengths: 'Ê¥ûÂØüÂäõ„ÄÅÁõ¥ÊÑüÂäõ„ÄÅÁ≤æÁ•ûÊÄß',
                    challenges: 'Â≠§Á´ã„Åó„Åå„Å°„ÄÅÁèæÂÆüÈÄÉÈÅø'
                },
                8: {
                    personality: 'ÈáéÂøÉÁöÑ„ÅßÂÆüÂäõ‰∏ªÁæ©„ÅÆÊàêÂäüËÄÖ„Çø„Ç§„Éó„ÄÇÁâ©Ë≥™ÁöÑÊàêÂäü„ÇíËøΩÊ±Ç„Åó„ÄÅÊ®©Âäõ„ÇÑÂú∞‰Ωç„Å´Èñ¢ÂøÉ„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ',
                    strengths: 'ÂÆüË°åÂäõ„ÄÅÈáéÂøÉ„ÄÅÁµåÂñ∂ËÉΩÂäõ',
                    challenges: 'Áâ©Ë≥™‰∏ªÁæ©„ÄÅÊ®©ÂäõÊ¨≤'
                },
                9: {
                    personality: 'ÂçöÊÑõÁ≤æÁ•û„Å´Ê∫Ä„Å°„Åü‰∫∫ÈÅì‰∏ªÁæ©ËÄÖ„Çø„Ç§„Éó„ÄÇÂ§ö„Åè„ÅÆ‰∫∫„ÅÆÂπ∏„Åõ„ÇíÈ°ò„ÅÑ„ÄÅÁ§æ‰ºöË≤¢ÁåÆ„Å´Èñ¢ÂøÉ„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ',
                    strengths: 'ÊÖàÊÇ≤ÂøÉ„ÄÅÁêÜÊÉ≥‰∏ªÁæ©„ÄÅÂ∫É„ÅÑË¶ñÈáé',
                    challenges: 'ÁêÜÊÉ≥„Å®ÁèæÂÆü„ÅÆ„ÇÆ„É£„ÉÉ„Éó„ÄÅÊÑüÊÉÖÁöÑ'
                },
                11: {
                    personality: 'Áõ¥ÊÑüÂäõ„Å´ÂÑ™„Çå„Åü„Çπ„Éî„É™„ÉÅ„É•„Ç¢„É´„Å™„É™„Éº„ÉÄ„Éº„Çø„Ç§„Éó„ÄÇÈ´ò„ÅÑÁêÜÊÉ≥„ÇíÊåÅ„Å°„ÄÅ‰∫∫„ÄÖ„ÇíÂ∞é„Åè‰ΩøÂëΩ„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ',
                    strengths: 'Áõ¥ÊÑüÂäõ„ÄÅÈúäÊÑü„ÄÅÊåáÂ∞éÂäõ',
                    challenges: 'Á•ûÁµåË≥™„ÄÅ„Éó„É¨„ÉÉ„Ç∑„É£„Éº„Å´Âº±„ÅÑ'
                },
                22: {
                    personality: 'Â£ÆÂ§ß„Å™Â§¢„ÇíÁèæÂÆüÂåñ„Åô„ÇãÂª∫Ë®≠ËÄÖ„Çø„Ç§„Éó„ÄÇÁêÜÊÉ≥„Å®ÁèæÂÆü„ÇíÁµê„Å≥„Å§„Åë„ÄÅÂ§ß„Åç„Å™ÊàêÊûú„ÇíÊÆã„Åô„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ',
                    strengths: 'ÂÆüÁèæÂäõ„ÄÅÊåáÂ∞éÂäõ„ÄÅÊßãÁØâËÉΩÂäõ',
                    challenges: 'ÈáçÂúß„ÄÅÂÆåÁíß‰∏ªÁæ©'
                }
            },
            personalDay: {
                1: 'Êñ∞„Åó„ÅÑ„Çπ„Çø„Éº„Éà„Å´ÊúÄÈÅ©„Å™Êó•„ÄÇÁ©çÊ•µÁöÑ„Å´Ë°åÂãï„Åô„Çã„Å®ËâØ„ÅÑÁµêÊûú„ÅåÂæó„Çâ„Çå„Çã„Åß„Åó„Çá„ÅÜ„ÄÇ',
                2: 'ÂçîÂäõ„Å®Ë™øÂíå„ÇíÈáçË¶ñ„Åô„ÇãÊó•„ÄÇ‰∫∫„Å®„ÅÆÈñ¢‰øÇ„ÇíÂ§ßÂàá„Å´„Åó„ÄÅ„ÉÅ„Éº„É†„ÉØ„Éº„ÇØ„ÇíÊ¥ª„Åã„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ',
                3: 'ÂâµÈÄ†ÊÄß„Å®Ë°®ÁèæÂäõ„ÅåÈ´ò„Åæ„ÇãÊó•„ÄÇËä∏Ë°ìÁöÑÊ¥ªÂãï„ÇÑ„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥„Å´ËâØ„ÅÑÊó•„Åß„Åô„ÄÇ',
                4: 'Ë®àÁîªÁöÑ„Å´Áâ©‰∫ã„ÇíÈÄ≤„ÇÅ„ÇãÊó•„ÄÇÂú∞ÈÅì„Å™Âä™Âäõ„ÅåÂÆü„ÇíÁµê„Å∂ÊôÇÊúü„Åß„Åô„ÄÇ',
                5: 'Â§âÂåñ„Å®ÂÜíÈô∫„ÇíÊ•Ω„Åó„ÇÄÊó•„ÄÇÊñ∞„Åó„ÅÑ‰ΩìÈ®ì„ÇÑÂá∫‰ºö„ÅÑ„ÅåÂæÖ„Å£„Å¶„ÅÑ„Çã„Åã„ÇÇ„Åó„Çå„Åæ„Åõ„Çì„ÄÇ',
                6: 'ÂÆ∂Êóè„ÇÑÊÑõ„Åô„Çã‰∫∫„Å®„ÅÆÊôÇÈñì„ÇíÂ§ßÂàá„Å´„Åô„ÇãÊó•„ÄÇÊÄù„ÅÑ„ÇÑ„Çä„Å®ÊÑõÊÉÖ„ÅåÂπ∏ÈÅã„ÇíÂëº„Å≥„Åæ„Åô„ÄÇ',
                7: 'ÂÜÖÁúÅ„Å®Â≠¶Áøí„Å´ÈÅ©„Åó„ÅüÊó•„ÄÇ‰∏Ä‰∫∫„ÅÆÊôÇÈñì„ÇíÂ§ßÂàá„Å´„Åó„ÄÅÁ≤æÁ•ûÁöÑ„Å™ÊàêÈï∑„ÇíÂõ≥„Çä„Åæ„Åó„Çá„ÅÜ„ÄÇ',
                8: 'ÁõÆÊ®ôÈÅîÊàê„Å´Âêë„Åë„Å¶Âä™Âäõ„Åô„ÇãÊó•„ÄÇ„Éì„Ç∏„Éç„Çπ„ÇÑÂÆüÂãôÈù¢„ÅßÊàêÊûú„Çí‰∏ä„Åí„ÇÑ„Åô„ÅÑÊôÇÊúü„Åß„Åô„ÄÇ',
                9: '‰ªñ‰∫∫„Å∏„ÅÆÂ•â‰ªï„Å®ÊÖàÊÑõ„ÅÆÊó•„ÄÇ‰∫∫Âä©„Åë„ÇÑÁ§æ‰ºöË≤¢ÁåÆÊ¥ªÂãï„Å´ËâØ„ÅÑ„Ç®„Éç„É´„ÇÆ„Éº„ÅåÊµÅ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ'
            },
            personalMonth: {
                1: 'Êñ∞„Åó„ÅÑ„Çµ„Ç§„ÇØ„É´„ÅÆÂßã„Åæ„Çä„ÄÇ‰ªäÊúà„ÅØÊñ∞‰ºÅÁîª„ÇÑÊñ∞„Åó„ÅÑÈñ¢‰øÇ„Çí„Çπ„Çø„Éº„Éà„Åï„Åõ„Çã„ÅÆ„Å´ÊúÄÈÅ©„Åß„Åô„ÄÇ',
                2: 'ÂçîÂäõÈñ¢‰øÇ„ÇíÊ∑±„ÇÅ„ÇãÊúà„ÄÇ„Éë„Éº„Éà„Éä„Éº„Ç∑„ÉÉ„Éó„ÇÑÂèãÊÉÖ„ÇíËÇ≤„ÇÄ„Åì„Å®„Å´ÈáçÁÇπ„ÇíÁΩÆ„Åç„Åæ„Åó„Çá„ÅÜ„ÄÇ',
                3: 'ÂâµÈÄ†ÊÄß„ÅåÈñãËä±„Åô„ÇãÊúà„ÄÇËä∏Ë°ìÁöÑÊ¥ªÂãï„ÇÑËá™Â∑±Ë°®Áèæ„Å´Á©çÊ•µÁöÑ„Å´Âèñ„ÇäÁµÑ„Åø„Åæ„Åó„Çá„ÅÜ„ÄÇ',
                4: 'Âü∫Áõ§„ÇíÂõ∫„ÇÅ„ÇãÊúà„ÄÇË®àÁîª„ÇíÁ´ã„Å¶„ÄÅÁùÄÂÆü„Å´ÁõÆÊ®ô„Å´Âêë„Åã„Å£„Å¶ÈÄ≤„Åø„Åæ„Åó„Çá„ÅÜ„ÄÇ',
                5: 'Â§âÂåñ„Å®Ëá™Áî±„ÇíÊ±Ç„ÇÅ„ÇãÊúà„ÄÇÊñ∞„Åó„ÅÑÁµåÈ®ì„ÇÑÂÜíÈô∫„Å´Á©çÊ•µÁöÑ„Å´„ÉÅ„É£„É¨„É≥„Ç∏„Åó„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                6: 'ÊÑõ„Å®Ë≤¨‰ªª„ÅÆÊúà„ÄÇÂÆ∂Êóè„ÇÑÂ§ßÂàá„Å™‰∫∫„Å®„ÅÆÁµÜ„ÇíÊ∑±„ÇÅ„ÄÅË≤¨‰ªª„ÇíÊûú„Åü„Åô„Åì„Å®„Å´ÈõÜ‰∏≠„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ',
                7: 'ÂÜÖÈù¢„Å®Âêë„ÅçÂêà„ÅÜÊúà„ÄÇÁûëÊÉ≥„ÇÑÂ≠¶Áøí„ÇíÈÄö„Åò„Å¶„ÄÅÁ≤æÁ•ûÁöÑ„Å™ÊàêÈï∑„ÇíÂõ≥„ÇãÊôÇÊúü„Åß„Åô„ÄÇ',
                8: 'ÊàêÊûú„ÇíÂèéÁ©´„Åô„ÇãÊúà„ÄÇ„Éì„Ç∏„Éç„Çπ„ÇÑÁâ©Ë≥™Èù¢„Åß„ÅÆÊàêÂäü„ÅåÊúüÂæÖ„Åß„Åç„ÇãÊôÇÊúü„Åß„Åô„ÄÇ',
                9: 'ÂÆåÊàê„Å®ÊâãÊîæ„Åó„ÅÆÊúà„ÄÇ‰∏çË¶Å„Å™„ÇÇ„ÅÆ„ÇíÊâãÊîæ„Åó„ÄÅÊñ∞„Åó„ÅÑ„Çµ„Ç§„ÇØ„É´„Å´Âêë„Åë„Å¶Ê∫ñÂÇô„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ'
            }
        };

        function createStars() {
            const starsContainer = document.getElementById('stars');
            const starCount = 50;
            
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 2 + 's';
                starsContainer.appendChild(star);
            }
        }

        function populateDays() {
            const monthSelect = document.getElementById('month');
            const daySelect = document.getElementById('day');
            const hourSelect = document.getElementById('hour');
            const minuteSelect = document.getElementById('minute');
            
            // ÊôÇÈñì„ÅÆÈÅ∏ÊäûËÇ¢„Çí‰ΩúÊàê
            for (let hour = 0; hour < 24; hour++) {
                const option = document.createElement('option');
                option.value = hour;
                option.textContent = hour.toString().padStart(2, '0') + 'ÊôÇ';
                hourSelect.appendChild(option);
            }
            
            // ÂàÜ„ÅÆÈÅ∏ÊäûËÇ¢„Çí‰ΩúÊàêÔºà1ÂàÜÂàª„ÅøÔºâ
            for (let minute = 0; minute < 60; minute++) {
                const option = document.createElement('option');
                option.value = minute;
                option.textContent = minute.toString().padStart(2, '0') + 'ÂàÜ';
                minuteSelect.appendChild(option);
            }
            
            // „Éá„Éï„Ç©„É´„Éà„Åß12:00„ÇíÈÅ∏Êäû
            hourSelect.value = 12;
            minuteSelect.value = 0;
            
            monthSelect.addEventListener('change', function() {
                const year = parseInt(document.getElementById('year').value) || 2024;
                const month = parseInt(this.value);
                daySelect.innerHTML = '<option value="">Êó•„ÇíÈÅ∏Êäû</option>';
                
                if (month) {
                    const daysInMonth = new Date(year, month, 0).getDate();
                    for (let day = 1; day <= daysInMonth; day++) {
                        const option = document.createElement('option');
                        option.value = day;
                        option.textContent = day + 'Êó•';
                        daySelect.appendChild(option);
                    }
                }
            });
        }

        function getZodiacSign(month, day) {
            for (const [sign, data] of Object.entries(zodiacData)) {
                const [[startMonth, startDay], [endMonth, endDay]] = data.dates;
                
                if (startMonth === endMonth) {
                    if (month === startMonth && day >= startDay && day <= endDay) {
                        return sign;
                    }
                } else {
                    if ((month === startMonth && day >= startDay) || 
                        (month === endMonth && day <= endDay)) {
                        return sign;
                    }
                }
                
                if (data.extra) {
                    const [[extraStartMonth, extraStartDay], [extraEndMonth, extraEndDay]] = data.extra;
                    if ((month === extraStartMonth && day >= extraStartDay) || 
                        (month === extraEndMonth && day <= extraEndDay)) {
                        return sign;
                    }
                }
            }
            return null;
        }

        // Â§©‰Ωì‰ΩçÁΩÆ„ÇíÂèñÂæó„Åô„Çã„Åü„ÇÅ„ÅÆÈñ¢Êï∞
        async function getPlanetaryPositions(birthDate) {
            try {
                // ÁîüÂπ¥ÊúàÊó•„ÇíÂü∫„Å´Â§©‰Ωì‰ΩçÁΩÆ„ÇíË®àÁÆóÔºà‰ªäÊó•„ÅÆÈÅãÂã¢„Å™„ÅÆ„Åß‰ªäÊó•„ÅÆÊó•‰ªò„Çí‰ΩøÁî®Ôºâ
                const today = new Date();
                
                // ÁîüÂπ¥ÊúàÊó•„ÅÆÊÉÖÂ†±„ÇÇËÄÉÊÖÆ„Åó„ÅüÂÄãÂà•„ÅÆÂ§©‰ΩìÈÖçÁΩÆË®àÁÆó
                const positions = calculatePlanetaryPositions(today, birthDate);
                
                return positions;
            } catch (error) {
                console.error('Â§©‰Ωì‰ΩçÁΩÆ„ÅÆÂèñÂæó„Å´Â§±Êïó:', error);
                return null;
            }
        }

        // „Çà„ÇäÊú¨Ê†ºÁöÑ„Å™Â§©‰Ωì‰ΩçÁΩÆË®àÁÆóÔºàÂÆüÈöõ„ÅÆÂ§©‰ΩìÊö¶„Å´Âü∫„Å•„ÅèÔºâ
        function calculatePlanetaryPositions(date, birthDate = null) {
            const J2000_EPOCH = new Date('2000-01-01T12:00:00Z');
            const daysSinceJ2000 = (date - J2000_EPOCH) / (1000 * 60 * 60 * 24);
            
            // ÂÆüÈöõ„ÅÆÂπ≥ÂùáËªåÈÅìË¶ÅÁ¥†„Çí‰ΩøÁî®„Åó„ÅüÂ§©‰Ωì‰ΩçÁΩÆË®àÁÆó
            const meanLongitudes = {
                sun: (280.460 + 0.9856474 * daysSinceJ2000) % 360,
                moon: (218.316 + 13.176396 * daysSinceJ2000) % 360,
                mercury: (252.251 + 4.092317 * daysSinceJ2000) % 360,
                venus: (181.975 + 1.602136 * daysSinceJ2000) % 360,
                mars: (355.453 + 0.524033 * daysSinceJ2000) % 360,
                jupiter: (34.351 + 0.083091 * daysSinceJ2000) % 360,
                saturn: (50.077 + 0.033494 * daysSinceJ2000) % 360
            };
            
            // Ê•ïÂÜÜËªåÈÅì„ÅÆË£úÊ≠£ÔºàÁ∞°ÊòìÁâàÔºâ
            const eccentricityCorrections = {
                sun: 1.915 * Math.sin((357.5 + 0.9856 * daysSinceJ2000) * Math.PI / 180),
                moon: 6.289 * Math.sin((134.9 + 13.0649 * daysSinceJ2000) * Math.PI / 180),
                mercury: 23.44 * Math.sin((174.8 + 4.092 * daysSinceJ2000) * Math.PI / 180),
                venus: 0.775 * Math.sin((50.4 + 1.602 * daysSinceJ2000) * Math.PI / 180),
                mars: 10.69 * Math.sin((19.4 + 0.524 * daysSinceJ2000) * Math.PI / 180),
                jupiter: 5.555 * Math.sin((20.0 + 0.083 * daysSinceJ2000) * Math.PI / 180),
                saturn: 6.406 * Math.sin((317.0 + 0.033 * daysSinceJ2000) * Math.PI / 180)
            };
            
            // Ë£úÊ≠£Âæå„ÅÆÂ§©‰Ωì‰ΩçÁΩÆ
            let positions = {};
            Object.keys(meanLongitudes).forEach(planet => {
                positions[planet] = (meanLongitudes[planet] + eccentricityCorrections[planet]) % 360;
                if (positions[planet] < 0) positions[planet] += 360;
            });
            
            // Âá∫ÁîüÂõ≥„ÅÆË®àÁÆóÔºàbirthDate„ÅåÊèê‰æõ„Åï„Çå„Å¶„ÅÑ„ÇãÂ†¥ÂêàÔºâ
            let birthChart = null;
            if (birthDate) {
                birthChart = calculateBirthChart(birthDate);
            }
            
            // ÊÉëÊòüÈÄÜË°å„ÅÆÂà§ÂÆöÔºà„Çà„ÇäÁ≤æÂØÜ„Å´Ôºâ
            const retrogradeData = checkRetrogradeAccurate(daysSinceJ2000);
            
            // ÊúàÁõ∏„ÅÆË®àÁÆó
            const moonPhase = calculateMoonPhase(date);

            // Â∫¶Êï∞„ÇíÊòüÂ∫ß„Å´Â§âÊèõ
            const zodiacSigns = ['Áâ°ÁæäÂ∫ß', 'Áâ°ÁâõÂ∫ß', 'ÂèåÂ≠êÂ∫ß', 'ËüπÂ∫ß', 'ÁçÖÂ≠êÂ∫ß', '‰πôÂ•≥Â∫ß', 
                               'Â§©Áß§Â∫ß', 'Ë†çÂ∫ß', 'Â∞ÑÊâãÂ∫ß', 'Â±±ÁæäÂ∫ß', 'Ê∞¥Áì∂Â∫ß', 'È≠öÂ∫ß'];
            
            const result = {};
            for (const [planet, degree] of Object.entries(positions)) {
                const signIndex = Math.floor(degree / 30);
                const signDegree = Math.floor(degree % 30);
                
                result[planet] = {
                    sign: zodiacSigns[signIndex],
                    degree: signDegree,
                    longitude: degree, // Ê≠£Á¢∫„Å™ÈªÑÁµå
                    retrograde: retrogradeData[planet] || false
                };
            }
            
            // ÊúàÁõ∏„Å®„Éè„Ç¶„ÇπÊÉÖÂ†±„ÇíËøΩÂä†
            result.moonPhase = moonPhase;
            result.birthChart = birthChart;
            
            return result;
        }
        
        // Âá∫ÁîüÂõ≥„ÅÆË®àÁÆó
        function calculateBirthChart(birthDate) {
            const J2000_EPOCH = new Date('2000-01-01T12:00:00Z');
            const daysSinceBirth = (birthDate - J2000_EPOCH) / (1000 * 60 * 60 * 24);
            
            // Âá∫ÁîüÊôÇ„ÅÆÂ§©‰Ωì‰ΩçÁΩÆË®àÁÆó
            const birthPositions = {
                sun: (280.460 + 0.9856474 * daysSinceBirth) % 360,
                moon: (218.316 + 13.176396 * daysSinceBirth) % 360,
                mercury: (252.251 + 4.092317 * daysSinceBirth) % 360,
                venus: (181.975 + 1.602136 * daysSinceBirth) % 360,
                mars: (355.453 + 0.524033 * daysSinceBirth) % 360,
                jupiter: (34.351 + 0.083091 * daysSinceBirth) % 360,
                saturn: (50.077 + 0.033494 * daysSinceBirth) % 360
            };
            
            // Á∞°Êòì„Éè„Ç¶„Çπ„Ç∑„Çπ„ÉÜ„É†ÔºàÂá∫ÁîüÊôÇÂàª„Å´„Çà„ÇãÔºâ
            const birthHour = birthDate.getHours();
            const ascendant = (birthHour * 15) % 360; // ‰∏äÊòáÂÆÆÔºàÁ∞°ÊòìË®àÁÆóÔºâ
            
            const zodiacSigns = ['Áâ°ÁæäÂ∫ß', 'Áâ°ÁâõÂ∫ß', 'ÂèåÂ≠êÂ∫ß', 'ËüπÂ∫ß', 'ÁçÖÂ≠êÂ∫ß', '‰πôÂ•≥Â∫ß', 
                               'Â§©Áß§Â∫ß', 'Ë†çÂ∫ß', 'Â∞ÑÊâãÂ∫ß', 'Â±±ÁæäÂ∫ß', 'Ê∞¥Áì∂Â∫ß', 'È≠öÂ∫ß'];
            
            const birthChart = {
                ascendant: {
                    sign: zodiacSigns[Math.floor(ascendant / 30)],
                    degree: Math.floor(ascendant % 30)
                },
                planets: {}
            };
            
            Object.keys(birthPositions).forEach(planet => {
                const longitude = birthPositions[planet];
                birthChart.planets[planet] = {
                    sign: zodiacSigns[Math.floor(longitude / 30)],
                    degree: Math.floor(longitude % 30),
                    longitude: longitude
                };
            });
            
            return birthChart;
        }
        
        // „Çà„ÇäÁ≤æÂØÜ„Å™ÊÉëÊòüÈÄÜË°å„ÅÆÂà§ÂÆö
        function checkRetrogradeAccurate(daysSinceJ2000) {
            // ÂÆüÈöõ„ÅÆÈÄÜË°åÂë®Êúü„Å´Âü∫„Å•„ÅèË®àÁÆó
            const retrogradePatterns = {
                mercury: Math.sin((daysSinceJ2000 / 88) * 2 * Math.PI) < -0.3, // 88Êó•Âë®Êúü
                venus: Math.sin((daysSinceJ2000 / 584) * 2 * Math.PI) < -0.7, // 584Êó•Âë®Êúü  
                mars: Math.sin((daysSinceJ2000 / 687) * 2 * Math.PI) < -0.6, // 687Êó•Âë®Êúü
                jupiter: Math.sin((daysSinceJ2000 / 399) * 2 * Math.PI) < -0.5, // 399Êó•Âë®Êúü
                saturn: Math.sin((daysSinceJ2000 / 378) * 2 * Math.PI) < -0.5, // 378Êó•Âë®Êúü
                sun: false, // Â§™ÈôΩ„ÅØÈÄÜË°å„Åó„Å™„ÅÑ
                moon: false // Êúà„ÅØÈÄÜË°å„Åó„Å™„ÅÑ
            };
            
            return retrogradePatterns;
        }
        
        // ÊúàÁõ∏„ÅÆË®àÁÆó
        function calculateMoonPhase(date) {
            const knownNewMoon = new Date('2024-01-11'); // Êó¢Áü•„ÅÆÊñ∞Êúà
            const synodicMonth = 29.53059; // ÊúîÊúõÊúà
            
            const daysDiff = (date - knownNewMoon) / (1000 * 60 * 60 * 24);
            const lunarCycle = ((daysDiff % synodicMonth) + synodicMonth) % synodicMonth;
            
            if (lunarCycle < 1.84) return { name: 'Êñ∞Êúà', effect: 'new_beginning' };
            else if (lunarCycle < 5.53) return { name: '‰∏âÊó•Êúà', effect: 'growth' };
            else if (lunarCycle < 9.22) return { name: '‰∏äÂº¶„ÅÆÊúà', effect: 'action' };
            else if (lunarCycle < 12.91) return { name: 'ÂçÅ‰∏âÂ§ú', effect: 'manifestation' };
            else if (lunarCycle < 16.61) return { name: 'Ê∫ÄÊúà', effect: 'completion' };
            else if (lunarCycle < 20.30) return { name: 'ÂØùÂæÖÊúà', effect: 'gratitude' };
            else if (lunarCycle < 23.99) return { name: '‰∏ãÂº¶„ÅÆÊúà', effect: 'release' };
            else if (lunarCycle < 27.68) return { name: 'ÊúâÊòéÊúà', effect: 'reflection' };
            else return { name: 'Êñ∞ÊúàÂâç', effect: 'preparation' };
        }

        // ÊÉëÊòüÂêåÂ£´„ÅÆ„Ç¢„Çπ„Éö„ÇØ„ÉàÔºàËßíÂ∫¶Èñ¢‰øÇÔºâ„ÇíË®àÁÆó
        function calculateAspects(positions) {
            const aspects = [];
            const planets = Object.keys(positions);
            const aspectTypes = {
                0: { name: 'Âêà', orb: 8, effect: 'strong' },
                60: { name: 'ÂÖ≠ÂàÜ', orb: 6, effect: 'harmonious' },
                90: { name: 'ÂõõÂàÜ', orb: 8, effect: 'challenging' },
                120: { name: '‰∏âÂàÜ', orb: 8, effect: 'harmonious' },
                180: { name: 'ÂØæÁ´ã', orb: 8, effect: 'challenging' }
            };
            
            for (let i = 0; i < planets.length; i++) {
                for (let j = i + 1; j < planets.length; j++) {
                    const planet1 = planets[i];
                    const planet2 = planets[j];
                    const degree1 = positions[planet1].degree + (getSignIndex(positions[planet1].sign) * 30);
                    const degree2 = positions[planet2].degree + (getSignIndex(positions[planet2].sign) * 30);
                    
                    let angleDiff = Math.abs(degree1 - degree2);
                    if (angleDiff > 180) angleDiff = 360 - angleDiff;
                    
                    for (const [aspectDegree, aspectInfo] of Object.entries(aspectTypes)) {
                        const targetAngle = parseInt(aspectDegree);
                        if (Math.abs(angleDiff - targetAngle) <= aspectInfo.orb) {
                            aspects.push({
                                planet1,
                                planet2,
                                aspect: aspectInfo.name,
                                effect: aspectInfo.effect,
                                angle: angleDiff
                            });
                        }
                    }
                }
            }
            return aspects;
        }
        
        function getSignIndex(signName) {
            const signs = ['Áâ°ÁæäÂ∫ß', 'Áâ°ÁâõÂ∫ß', 'ÂèåÂ≠êÂ∫ß', 'ËüπÂ∫ß', 'ÁçÖÂ≠êÂ∫ß', '‰πôÂ•≥Â∫ß', 
                          'Â§©Áß§Â∫ß', 'Ë†çÂ∫ß', 'Â∞ÑÊâãÂ∫ß', 'Â±±ÁæäÂ∫ß', 'Ê∞¥Áì∂Â∫ß', 'È≠öÂ∫ß'];
            return signs.indexOf(signName);
        }
        
        // „Éà„É©„É≥„Ç∏„ÉÉ„ÉàÂäπÊûú„ÅÆË®àÁÆóÔºàÁèæÂú®„ÅÆÂ§©‰Ωì„Å®Âá∫ÁîüÂõ≥„ÅÆÁõ∏‰∫í‰ΩúÁî®Ôºâ
        function calculateTransitEffects(currentPositions, birthChart) {
            let effects = {
                overall: '',
                love: '',
                work: '',
                health: ''
            };
            
            // ‰∏ªË¶Å„Å™„Éà„É©„É≥„Ç∏„ÉÉ„Éà„Çí„ÉÅ„Çß„ÉÉ„ÇØ
            const transitPlanets = ['sun', 'moon', 'mercury', 'venus', 'mars', 'jupiter', 'saturn'];
            
            transitPlanets.forEach(transitPlanet => {
                const currentPlanet = currentPositions[transitPlanet];
                if (!currentPlanet) return;
                
                // Âá∫ÁîüÂõ≥„ÅÆÂêÑÊÉëÊòü„Å®„ÅÆËßíÂ∫¶„Çí„ÉÅ„Çß„ÉÉ„ÇØ
                Object.keys(birthChart.planets).forEach(natalPlanet => {
                    const natalPosition = birthChart.planets[natalPlanet];
                    const angleDiff = Math.abs(currentPlanet.longitude - natalPosition.longitude);
                    const normalizedAngle = angleDiff > 180 ? 360 - angleDiff : angleDiff;
                    
                    // ÈáçË¶Å„Å™„Éà„É©„É≥„Ç∏„ÉÉ„Éà„Éª„Ç¢„Çπ„Éö„ÇØ„Éà
                    if (normalizedAngle < 5) { // ÂêàÔºà0Â∫¶Ôºâ
                        effects.overall += getTransitInterpretation(transitPlanet, natalPlanet, 'conjunction');
                    } else if (Math.abs(normalizedAngle - 60) < 5) { // ÂÖ≠ÂàÜÔºà60Â∫¶Ôºâ
                        effects.love += getTransitInterpretation(transitPlanet, natalPlanet, 'sextile');
                    } else if (Math.abs(normalizedAngle - 90) < 5) { // ÂõõÂàÜÔºà90Â∫¶Ôºâ
                        effects.work += getTransitInterpretation(transitPlanet, natalPlanet, 'square');
                    } else if (Math.abs(normalizedAngle - 120) < 5) { // ‰∏âÂàÜÔºà120Â∫¶Ôºâ
                        effects.overall += getTransitInterpretation(transitPlanet, natalPlanet, 'trine');
                    } else if (Math.abs(normalizedAngle - 180) < 5) { // ÂØæÁ´ãÔºà180Â∫¶Ôºâ
                        effects.health += getTransitInterpretation(transitPlanet, natalPlanet, 'opposition');
                    }
                });
            });
            
            return effects;
        }
        
        // „Éà„É©„É≥„Ç∏„ÉÉ„ÉàËß£Èáà„ÅÆÂèñÂæó
        function getTransitInterpretation(transitPlanet, natalPlanet, aspectType) {
            const interpretations = {
                sun: {
                    sun: {
                        conjunction: ' Â§™ÈôΩÂõûÂ∏∞„ÅÆÂΩ±Èüø„ÅßÊñ∞„Åó„ÅÑ„Çµ„Ç§„ÇØ„É´„ÅåÂßã„Åæ„Çä„Åæ„Åô„ÄÇ',
                        trine: ' Ëá™Â∑±ÂÆüÁèæ„ÅÆÂ•ΩÊ©ü„ÅåË®™„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ'
                    },
                    moon: {
                        conjunction: ' ÊÑèË≠ò„Å®ÊÑüÊÉÖ„ÅåË™øÂíå„Åó„ÄÅÁõ¥ÊÑü„ÅåÂÜ¥„Åà„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
                        square: ' ÊÑüÊÉÖ„Å®ÁêÜÊÄß„ÅÆ„Éê„É©„É≥„Çπ„ÇíÂèñ„Çã„Åì„Å®„ÅåÂ§ßÂàá„Åß„Åô„ÄÇ'
                    }
                },
                venus: {
                    sun: {
                        conjunction: ' È≠ÖÂäõ„Å®ÂâµÈÄ†ÊÄß„ÅåÈ´ò„Åæ„ÇãÊôÇÊúü„Åß„Åô„ÄÇ',
                        sextile: ' ÊÅãÊÑõ„ÇÑÁæéÁöÑÊ¥ªÂãï„Å´ËâØ„ÅÑÂΩ±Èüø„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ'
                    },
                    venus: {
                        conjunction: ' ÈáëÊòüÂõûÂ∏∞„Å´„Çà„Çä„ÄÅÊÑõ„Å®Áæé„ÅÆÊÑèË≠ò„ÅåÈ´ò„Åæ„Çä„Åæ„Åô„ÄÇ'
                    }
                },
                mars: {
                    sun: {
                        conjunction: ' Ë°åÂãïÂäõ„Å®„Ç®„Éç„É´„ÇÆ„Éº„ÅåÊúÄÈ´òÊΩÆ„Å´ÈÅî„Åó„Åæ„Åô„ÄÇ',
                        square: ' Ë°ùÂãïÁöÑ„Å™Ë°åÂãï„Å´Ê≥®ÊÑè„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ'
                    },
                    mars: {
                        conjunction: ' ÁÅ´ÊòüÂõûÂ∏∞„Å´„Çà„Çä„ÄÅÊñ∞„Åü„Å™ÊåëÊà¶„Å∏„ÅÆÊÑèÊ¨≤„ÅåÊπß„Åç„Åæ„Åô„ÄÇ'
                    }
                }
            };
            
            return interpretations[transitPlanet]?.[natalPlanet]?.[aspectType] || '';
        }

        // „Çà„ÇäÊú¨Ê†ºÁöÑ„Å™Âç†ÊòüË°ìËß£ÈáàÁîüÊàêÔºà„Éà„É©„É≥„Ç∏„ÉÉ„Éà„Å®„Éç„Ç§„Çø„É´„ÅÆÁõ∏‰∫í‰ΩúÁî®Ôºâ
        function generateAstrologyFortune(zodiacSign, planetaryPositions, birthDate) {
            const aspects = calculateAspects(planetaryPositions);
            const moonPhase = planetaryPositions.moonPhase;
            const birthChart = planetaryPositions.birthChart;
            
            // Âü∫Êú¨Ëß£Èáà
            const sunInterpretation = astroInterpretations.sun[planetaryPositions.sun.sign];
            const venusInterpretation = astroInterpretations.venus[planetaryPositions.venus.sign];
            const marsInterpretation = astroInterpretations.mars[planetaryPositions.mars.sign];
            const moonInterpretation = astroInterpretations.moon[planetaryPositions.moon.sign];
            
            // „Éà„É©„É≥„Ç∏„ÉÉ„ÉàËß£ÈáàÔºàÁèæÂú®„ÅÆÂ§©‰Ωì„ÅåÂá∫ÁîüÂõ≥„Å´‰∏é„Åà„ÇãÂΩ±ÈüøÔºâ
            let transitEffects = '';
            if (birthChart) {
                transitEffects = calculateTransitEffects(planetaryPositions, birthChart);
            }
            
            // „Ç¢„Çπ„Éö„ÇØ„Éà„Å´„Çà„Çã‰øÆÊ≠£
            let aspectModifications = {
                overall: '',
                love: '',
                work: '',
                health: ''
            };
            
            aspects.forEach(aspect => {
                if (aspect.planet1 === 'sun' || aspect.planet2 === 'sun') {
                    if (aspect.effect === 'harmonious') {
                        aspectModifications.overall += ' Â§™ÈôΩ„ÅÆË™øÂíåÁöÑ„Å™ÈÖçÁΩÆ„Å´„Çà„Çä„ÄÅÂÖ®‰ΩìÁöÑ„Å´ËâØ„ÅÑÊµÅ„Çå„ÅåÊúüÂæÖ„Åß„Åç„Åæ„Åô„ÄÇ';
                    } else if (aspect.effect === 'challenging') {
                        aspectModifications.overall += ' Â§™ÈôΩ„ÅÆÁ∑äÂºµÈÖçÁΩÆ„Å´„Çà„Çä„ÄÅÊ≥®ÊÑèÊ∑±„ÅÑË°åÂãï„ÅåÂøÖË¶Å„Åß„Åô„Åå„ÄÅÊàêÈï∑„ÅÆÊ©ü‰ºö„Åß„ÇÇ„ÅÇ„Çä„Åæ„Åô„ÄÇ';
                    }
                }
                
                if ((aspect.planet1 === 'venus' && aspect.planet2 === 'mars') || 
                    (aspect.planet1 === 'mars' && aspect.planet2 === 'venus')) {
                    if (aspect.effect === 'harmonious') {
                        aspectModifications.love += ' ÈáëÊòü„Å®ÁÅ´Êòü„ÅÆËâØ„ÅÑÈÖçÁΩÆ„Å´„Çà„Çä„ÄÅÊÅãÊÑõ„Å´„Åä„ÅÑ„Å¶Á©çÊ•µÊÄß„Å®È≠ÖÂäõ„ÅåË™øÂíå„Åó„Åæ„Åô„ÄÇ';
                    } else if (aspect.effect === 'challenging') {
                        aspectModifications.love += ' ÈáëÊòü„Å®ÁÅ´Êòü„ÅÆÁ∑äÂºµÈÖçÁΩÆ„Å´„Çà„Çä„ÄÅÊÅãÊÑõ„Åß„ÅØÊÖéÈáç„Åï„Å®ÊÉÖÁÜ±„ÅÆ„Éê„É©„É≥„Çπ„ÅåÈáçË¶Å„Åß„Åô„ÄÇ';
                    }
                }
            });
            
            // ÊúàÁõ∏„Å´„Çà„ÇãÂΩ±Èüø
            let moonPhaseEffect = '';
            switch (moonPhase.effect) {
                case 'new_beginning':
                    moonPhaseEffect = ' Êñ∞Êúà„ÅÆÂΩ±Èüø„ÅßÊñ∞„Åó„ÅÑ„Çπ„Çø„Éº„Éà„Å´ÊúÄÈÅ©„Å™ÊôÇÊúü„Åß„Åô„ÄÇ';
                    break;
                case 'growth':
                    moonPhaseEffect = ' ÊàêÈï∑„ÅÆÊúàÁõ∏„Å´„Çà„Çä„ÄÅÂ≠¶Áøí„ÇÑÁô∫Â±ï„Å´ËâØ„ÅÑÊôÇÊúü„Åß„Åô„ÄÇ';
                    break;
                case 'action':
                    moonPhaseEffect = ' ‰∏äÂº¶„ÅÆÊúà„ÅÆÂäõ„ÅßË°åÂãïÂäõ„ÅåÈ´ò„Åæ„ÇãÊôÇÊúü„Åß„Åô„ÄÇ';
                    break;
                case 'completion':
                    moonPhaseEffect = ' Ê∫ÄÊúà„ÅÆÂº∑„ÅÑ„Ç®„Éç„É´„ÇÆ„Éº„ÅßÁâ©‰∫ã„ÅåÂÆåÊàê„Å´Âêë„Åã„ÅÜÊôÇÊúü„Åß„Åô„ÄÇ';
                    break;
                case 'release':
                    moonPhaseEffect = ' ‰∏ãÂº¶„ÅÆÊúà„ÅÆÂΩ±Èüø„ÅßÊâãÊîæ„Åó„Å®ÊµÑÂåñ„Å´ÈÅ©„Åó„ÅüÊôÇÊúü„Åß„Åô„ÄÇ';
                    break;
                default:
                    moonPhaseEffect = ` ${moonPhase.name}„ÅÆÂΩ±Èüø„ÇíÂèó„Åë„Å¶„ÅÑ„Åæ„Åô„ÄÇ`;
            }
            
            // ÊÉëÊòüÈÄÜË°å„Å´„Çà„ÇãÂΩ±Èüø
            let retrogradeEffects = '';
            Object.entries(planetaryPositions).forEach(([planet, data]) => {
                if (data.retrograde) {
                    const planetNames = {
                        mercury: 'Ê∞¥Êòü',
                        venus: 'ÈáëÊòü', 
                        mars: 'ÁÅ´Êòü',
                        jupiter: 'Êú®Êòü',
                        saturn: 'ÂúüÊòü'
                    };
                    if (planetNames[planet]) {
                        retrogradeEffects += ` ${planetNames[planet]}ÈÄÜË°å‰∏≠„ÅÆ„Åü„ÇÅ„ÄÅ${planet === 'mercury' ? '„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥' : planet === 'venus' ? 'ÊÅãÊÑõÈñ¢‰øÇ' : planet === 'mars' ? 'Ë°åÂãï' : 'Â§âÂåñ'}„Å´„Å§„ÅÑ„Å¶ÊÖéÈáç„Å´ÈÄ≤„ÇÅ„Åæ„Åó„Çá„ÅÜ„ÄÇ`;
                    }
                }
            });
            
            // „É©„ÉÉ„Ç≠„Éº„Ç´„É©„Éº„Å®„Éä„É≥„Éê„Éº„ÇíÂ§©‰Ωì‰ΩçÁΩÆ„Åã„ÇâÁÆóÂá∫ÔºàÁîüÂπ¥ÊúàÊó•ËÄÉÊÖÆÔºâ
            const luckyColor = getLuckyColor(planetaryPositions);
            const luckyNumber = getLuckyNumber(planetaryPositions, birthDate);
            const advice = generateAdvice(planetaryPositions, aspects, birthDate);
            
            return {
                overall: sunInterpretation + aspectModifications.overall + moonPhaseEffect + retrogradeEffects + transitEffects.overall,
                love: venusInterpretation + aspectModifications.love + transitEffects.love,
                work: marsInterpretation + aspectModifications.work + transitEffects.work,
                health: moonInterpretation + aspectModifications.health + transitEffects.health,
                color: luckyColor,
                number: luckyNumber,
                advice: advice
            };
        }
        
        // Â§©‰Ωì‰ΩçÁΩÆ„Åã„Çâ„É©„ÉÉ„Ç≠„Éº„Ç´„É©„Éº„ÇíÁÆóÂá∫
        function getLuckyColor(positions) {
            const colors = {
                'Áâ°ÁæäÂ∫ß': '„É¨„ÉÉ„Éâ', 'Áâ°ÁâõÂ∫ß': '„Ç∞„É™„Éº„É≥', 'ÂèåÂ≠êÂ∫ß': '„Ç§„Ç®„É≠„Éº',
                'ËüπÂ∫ß': '„Ç∑„É´„Éê„Éº', 'ÁçÖÂ≠êÂ∫ß': '„Ç¥„Éº„É´„Éâ', '‰πôÂ•≥Â∫ß': '„Éç„Ç§„Éì„Éº',
                'Â§©Áß§Â∫ß': '„Éî„É≥„ÇØ', 'Ë†çÂ∫ß': '„Éá„Ç£„Éº„Éó„É¨„ÉÉ„Éâ', 'Â∞ÑÊâãÂ∫ß': '„Éë„Éº„Éó„É´',
                'Â±±ÁæäÂ∫ß': '„Éñ„É©„Ç¶„É≥', 'Ê∞¥Áì∂Â∫ß': '„Ç¢„ÇØ„Ç¢„Éñ„É´„Éº', 'È≠öÂ∫ß': '„Ç∑„Éº„Éñ„É´„Éº'
            };
            
            // ÈáëÊòü„ÅÆÊòüÂ∫ß„Åã„Çâ„É©„ÉÉ„Ç≠„Éº„Ç´„É©„Éº„ÇíÊ±∫ÂÆö
            return colors[positions.venus.sign] || '„Éî„É≥„ÇØ';
        }
        
        // Â§©‰Ωì‰ΩçÁΩÆ„Åã„Çâ„É©„ÉÉ„Ç≠„Éº„Éä„É≥„Éê„Éº„ÇíÁÆóÂá∫ÔºàÁîüÂπ¥ÊúàÊó•„ÇÇËÄÉÊÖÆÔºâ
        function getLuckyNumber(positions, birthDate) {
            let sum = 0;
            
            // Â§©‰Ωì‰ΩçÁΩÆ„ÅÆÂ∫¶Êï∞„ÇíÂêàË®à
            Object.values(positions).forEach(pos => {
                if (pos.degree !== undefined) {
                    sum += pos.degree;
                }
            });
            
            // ÁîüÂπ¥ÊúàÊó•„Å´„Çà„ÇãÂÄã‰∫∫ÁöÑ„Å™ÂΩ±Èüø„ÇíËøΩÂä†
            if (birthDate) {
                const birthYear = birthDate.getFullYear();
                const birthMonth = birthDate.getMonth() + 1;
                const birthDay = birthDate.getDate();
                const birthHour = birthDate.getHours();
                const birthMinute = birthDate.getMinutes();
                
                // ÁîüÂπ¥ÊúàÊó•„ÇíÊï∞ÂÄ§Âåñ„Åó„Å¶„É©„ÉÉ„Ç≠„Éº„Éä„É≥„Éê„Éº„Å´ÂΩ±Èüø
                const personalLucky = (birthYear % 100) + (birthMonth * 3) + (birthDay * 2) + birthHour + Math.floor(birthMinute / 10);
                sum += personalLucky;
            }
            
            return String(((sum % 99) + 1));
        }
        
        // Â§©‰ΩìÈÖçÁΩÆ„Åã„Çâ„Ç¢„Éâ„Éê„Ç§„Çπ„ÇíÁîüÊàêÔºà„Çà„ÇäÂÄãÂà•ÂåñÔºâ
        function generateAdvice(positions, aspects, birthDate) {
            const baseAdvice = {
                'Áâ°ÁæäÂ∫ß': ['ÂãáÊ∞ó„ÇíÊåÅ„Å£„Å¶Êñ∞„Åó„ÅÑÊåëÊà¶„Çí', 'Á©çÊ•µÁöÑ„Å™Ë°åÂãï„ÅåÂπ∏ÈÅã„ÇíÂëº„Å∂', '„É™„Éº„ÉÄ„Éº„Ç∑„ÉÉ„Éó„ÇíÁô∫ÊèÆ„Åó„Å¶'],
                'Áâ°ÁâõÂ∫ß': ['„ÇÜ„Å£„Åè„Çä„Å®Á¢∫ÂÆü„Å´ÈÄ≤„Çì„Åß', 'Áæé„Åó„ÅÑ„ÇÇ„ÅÆ„Å´Ëß¶„Çå„Å¶ÂøÉ„ÇíË±ä„Åã„Å´', '‰∫îÊÑü„ÇíÂ§ßÂàá„Å´„Åó„ÅüÁîüÊ¥ª„Çí'],
                'ÂèåÂ≠êÂ∫ß': ['Â•ΩÂ•áÂøÉ„ÇíÂ§ßÂàá„Å´Â≠¶„Å≥Á∂ö„Åë„Å¶', '„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥„ÇíÊ•Ω„Åó„Çì„Åß', 'Êñ∞„Åó„ÅÑÊÉÖÂ†±„Å´„Ç¢„É≥„ÉÜ„Éä„ÇíÂºµ„Å£„Å¶'],
                'ËüπÂ∫ß': ['Â§ßÂàá„Å™‰∫∫„Å®„ÅÆÁµÜ„ÇíÊ∑±„ÇÅ„Å¶', 'ÂÆ∂Êóè„Å®„ÅÆÊôÇÈñì„ÇíÂ§ßÂàá„Å´', 'Áõ¥ÊÑü„Çí‰ø°„Åò„Å¶Ë°åÂãï„Åó„Å¶'],
                'ÁçÖÂ≠êÂ∫ß': ['Ëá™‰ø°„ÇíÊåÅ„Å£„Å¶Ëºù„ÅÑ„Å¶', 'ÂâµÈÄ†ÊÄß„ÇíÂ≠òÂàÜ„Å´Áô∫ÊèÆ„Åó„Å¶', 'Â†Ç„ÄÖ„Å®Ëá™ÂàÜ„Çâ„Åó„Åï„ÇíË°®Áèæ„Åó„Å¶'],
                '‰πôÂ•≥Â∫ß': ['‰∏ÅÂØß„Åï„ÅåÊàêÂäü„ÅÆÈçµ', 'ÂÆåÁíß„ÇíÁõÆÊåá„Åó„Å¶Âä™Âäõ„Åó„Å¶', 'ÂàÜÊûêÂäõ„ÇíÊ¥ª„Åã„Åó„Å¶'],
                'Â§©Áß§Â∫ß': ['„Éê„É©„É≥„Çπ„Å®Ë™øÂíå„ÇíÂøÉ„Åå„Åë„Å¶', 'ÁæéÁöÑ„Çª„É≥„Çπ„ÇíÊ¥ª„Åã„Åó„Å¶', '‰∫∫„Å®„ÅÆË™øÂíå„ÇíÂ§ßÂàá„Å´'],
                'Ë†çÂ∫ß': ['Áõ¥ÊÑü„Çí‰ø°„Åò„Å¶Ê∑±„ÅèÊé¢Ê±Ç„Çí', 'ÈõÜ‰∏≠Âäõ„ÅßÂõ∞Èõ£„Çí‰πó„ÇäË∂ä„Åà„Å¶', 'Â§âÂåñ„ÇíÊÅê„Çå„ÅöÂèó„ÅëÂÖ•„Çå„Å¶'],
                'Â∞ÑÊâãÂ∫ß': ['Â∫É„ÅÑË¶ñÈáé„ÅßËá™Áî±„Å´ÁæΩ„Å∞„Åü„ÅÑ„Å¶', 'Êñ∞„Åó„ÅÑ‰∏ñÁïå„ÇíÊé¢Ê±Ç„Åó„Å¶', 'ÂÜíÈô∫ÂøÉ„ÇíÂ§ßÂàá„Å´'],
                'Â±±ÁæäÂ∫ß': ['ÁùÄÂÆü„Å™Âä™Âäõ„ÅåÂÆü„ÇíÁµê„Å∂', 'Ë≤¨‰ªªÊÑü„ÇíÊåÅ„Å£„Å¶Ë°åÂãï„Åó„Å¶', 'ÁõÆÊ®ô„Å´Âêë„Åã„Å£„Å¶‰∏ÄÊ≠©„Åö„Å§'],
                'Ê∞¥Áì∂Â∫ß': ['ÂÄãÊÄß„ÇíÊ¥ª„Åã„Åó„Å¶Èù©Êñ∞„Çí', 'Áã¨ÂâµÁöÑ„Å™„Ç¢„Ç§„Éá„Ç¢„ÇíÂ§ßÂàá„Å´', '‰ª≤Èñì„Å®„ÅÆÁµÜ„ÇíÊ∑±„ÇÅ„Å¶'],
                'È≠öÂ∫ß': ['ÊÄù„ÅÑ„ÇÑ„Çä„ÅÆÂøÉ„ÅßÊÑõ„Çí‰ºù„Åà„Å¶', 'Ëä∏Ë°ìÁöÑÊÑüÊÄß„ÇíÂ§ßÂàá„Å´', 'Áõ¥ÊÑü„Å´Âæì„Å£„Å¶']
            };
            
            // ÁîüÂπ¥ÊúàÊó•„Å´„Çà„ÇãÈÅ∏Êäû
            let adviceIndex = 0;
            if (birthDate) {
                const birthSum = birthDate.getDate() + birthDate.getHours() + birthDate.getMinutes();
                adviceIndex = birthSum % 3;
            }
            
            const selectedAdvice = baseAdvice[positions.sun.sign][adviceIndex];
            return selectedAdvice + '‚ô™';
        }

        // Â§©‰Ωì‰ΩçÁΩÆ„ÅÆÊñáÂ≠óÂàóÂåñÔºàÈÄÜË°å„Å®ÊúàÁõ∏ÊÉÖÂ†±„ÇíÂê´„ÇÄÔºâ- „Çà„ÇäÂàÜ„Åã„Çä„ÇÑ„Åô„Åè
        function formatPlanetaryPositions(positions) {
            const planetNames = {
                sun: '‚òÄÔ∏è Â§™ÈôΩ',
                moon: 'üåô Êúà',
                mercury: '‚òøÔ∏è Ê∞¥Êòü',
                venus: '‚ôÄÔ∏è ÈáëÊòü',
                mars: '‚ôÇÔ∏è ÁÅ´Êòü',
                jupiter: '‚ôÉ Êú®Êòü',
                saturn: '‚ôÑ ÂúüÊòü'
            };
            
            let result = '';
            
            // ÊúàÁõ∏ÊÉÖÂ†±„ÇíÊúÄÂàù„Å´Ë°®Á§∫
            if (positions.moonPhase) {
                result += `üåô <strong>ÊúàÁõ∏:</strong> ${positions.moonPhase.name}<br><br>`;
            }
            
            // ÂêÑÊÉëÊòü„ÅÆ‰ΩçÁΩÆÊÉÖÂ†± - Â∫¶Êï∞„ÅØË°®Á§∫„Åõ„Åö„ÄÅÊòüÂ∫ß„ÅÆ„Åø
            for (const [planet, data] of Object.entries(positions)) {
                if (planet === 'moonPhase') continue; // ÊúàÁõ∏„ÅØÊó¢„Å´Ë°®Á§∫Ê∏à„Åø
                
                const retrogradeText = data.retrograde ? ' <span style="color: #D4A5A5;">ÔºàÈÄÜË°å‰∏≠Ôºâ</span>' : '';
                result += `${planetNames[planet]}: <strong>${data.sign}</strong>${retrogradeText}<br>`;
            }
            
            result += '<br><small style="color: #A0657A;">ÂêÑÊÉëÊòü„Åå„Å©„ÅÆÊòüÂ∫ß„Å´„ÅÇ„Çã„Åã„Åß„ÄÅ„Åù„ÅÆÊòüÂ∫ß„ÅÆÁâπÊÄß„ÅåÂº∑Ë™ø„Åï„Çå„Åæ„Åô</small>';
            
            return result;
        }

        async function getFortune(zodiacSign, birthDate) {
            // Â§©‰Ωì‰ΩçÁΩÆ„ÇíÂèñÂæó
            const planetaryPositions = await getPlanetaryPositions(birthDate);
            
            if (!planetaryPositions) {
                // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ: Âü∫Êú¨„ÅÆÂç†„ÅÑ
                return {
                    fortune: {
                        overall: 'Â§©‰Ωì‰ΩçÁΩÆ„ÅÆË®àÁÆó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇÂü∫Êú¨ÁöÑ„Å™Âç†„ÅÑ„ÇíË°®Á§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
                        love: 'ÊÅãÊÑõÈÅã„ÅØËâØÂ•Ω„Åß„Åô„ÄÇ',
                        work: '‰ªï‰∫ãÈÅã„ÇÇ‰∏ä„ÄÖ„Åß„Åô„ÄÇ',
                        health: 'ÂÅ•Â∫∑ÈÅã„Å´Ê≥®ÊÑè„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                        color: '„Éî„É≥„ÇØ',
                        number: '7',
                        advice: 'ÂâçÂêë„Åç„Å´ÈÅé„Åî„Åó„Åæ„Åó„Çá„ÅÜ‚ô™'
                    },
                    positions: null
                };
            }
            
            // Â§©‰Ωì‰ΩçÁΩÆ„Å´Âü∫„Å•„ÅèÂç†„ÅÑÁîüÊàêÔºàÁîüÂπ¥ÊúàÊó•„ÇÇÊ∏°„ÅôÔºâ
            const fortune = generateAstrologyFortune(zodiacSign, planetaryPositions, birthDate);
            
            return {
                fortune: fortune,
                positions: planetaryPositions
            };
        }

        function displayResult(zodiacSign, result, birthDate) {
            const zodiacInfo = zodiacData[zodiacSign];
            const fortune = result.fortune;
            
            // ÊòüÂ∫ßÂç†„ÅÑÁµêÊûú
            document.getElementById('zodiacSymbol').textContent = zodiacInfo.symbol;
            document.getElementById('zodiacName').textContent = zodiacSign;
            
            document.getElementById('overallFortune').textContent = fortune.overall;
            document.getElementById('loveFortune').textContent = fortune.love;
            document.getElementById('workFortune').textContent = fortune.work;
            document.getElementById('healthFortune').textContent = fortune.health;
            document.getElementById('luckyColor').textContent = fortune.color;
            document.getElementById('luckyNumber').textContent = fortune.number;
            document.getElementById('advice').textContent = fortune.advice;
            
            // Êï∞ÁßòË°ìÁµêÊûú
            const numerologyResults = calculateNumerology(birthDate);
            displayNumerologyResults(numerologyResults);
            
            document.getElementById('loadingCard').style.display = 'none';
            document.getElementById('resultCard').style.display = 'block';
            
            document.getElementById('resultCard').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }
        
        // Êï∞ÁßòË°ìË®àÁÆó„ÅÆÁµ±ÂêàÈñ¢Êï∞
        function calculateNumerology(birthDate) {
            const lifePath = numerologySystem.calculateLifePath(birthDate);
            const personalDay = numerologySystem.calculatePersonalDay(birthDate);
            const personalMonth = numerologySystem.calculatePersonalMonth(birthDate);
            
            return {
                lifePath: lifePath,
                personalDay: personalDay,
                personalMonth: personalMonth,
                personality: numerologyInterpretations.lifePath[lifePath],
                dayMessage: numerologyInterpretations.personalDay[personalDay],
                monthMessage: numerologyInterpretations.personalMonth[personalMonth]
            };
        }
        
        // Êï∞ÁßòË°ìÁµêÊûú„ÅÆË°®Á§∫
        function displayNumerologyResults(numerologyResults) {
            document.getElementById('lifePathNumber').textContent = numerologyResults.lifePath;
            document.getElementById('personalDayNumber').textContent = numerologyResults.personalDay;
            document.getElementById('personalMonthNumber').textContent = numerologyResults.personalMonth;
            
            if (numerologyResults.personality) {
                document.getElementById('personalityDescription').textContent = numerologyResults.personality.personality;
                document.getElementById('personalityStrengths').textContent = numerologyResults.personality.strengths;
                document.getElementById('personalityChallenges').textContent = numerologyResults.personality.challenges;
            }
            
            document.getElementById('personalDayMessage').textContent = numerologyResults.dayMessage || '‰ªäÊó•„ÅØËâØ„ÅÑÊó•„Åß„Åô„ÄÇ';
            document.getElementById('personalMonthMessage').textContent = numerologyResults.monthMessage || '‰ªäÊúà„ÅØÈ†ÜË™ø„Å´ÈÄ≤„Åø„Åù„ÅÜ„Åß„Åô„ÄÇ';
        }

        document.getElementById('fortuneForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const year = parseInt(document.getElementById('year').value);
            const month = parseInt(document.getElementById('month').value);
            const day = parseInt(document.getElementById('day').value);
            const hour = parseInt(document.getElementById('hour').value);
            const minute = parseInt(document.getElementById('minute').value);
            
            if (!year || !month || !day || hour === null || minute === null) {
                alert('„Åô„Åπ„Å¶„ÅÆÈ†ÖÁõÆ„ÇíÊ≠£„Åó„ÅèÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            const zodiacSign = getZodiacSign(month, day);
            if (!zodiacSign) {
                alert('ÊòüÂ∫ß„ÅÆÂà§ÂÆö„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ');
                return;
            }
            
            // ÁîüÂπ¥ÊúàÊó•„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„Çí‰ΩúÊàê
            const birthDate = new Date(year, month - 1, day, hour, minute);
            
            document.getElementById('resultCard').style.display = 'none';
            document.getElementById('loadingCard').style.display = 'block';
            
            // Â§©‰Ωì‰ΩçÁΩÆ„ÇíË®àÁÆó„Åó„Å¶Âç†„ÅÑÁµêÊûú„ÇíÁîüÊàê
            try {
                const result = await getFortune(zodiacSign, birthDate);
                if (result) {
                    displayResult(zodiacSign, result, birthDate);
                } else {
                    document.getElementById('loadingCard').style.display = 'none';
                    alert('Âç†„ÅÑÁµêÊûú„ÅÆÂèñÂæó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ');
                }
            } catch (error) {
                console.error('Âç†„ÅÑÂá¶ÁêÜ„Ç®„É©„Éº:', error);
                document.getElementById('loadingCard').style.display = 'none';
                alert('Âç†„ÅÑÁµêÊûú„ÅÆÁîüÊàê‰∏≠„Å´„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ');
            }
        });


        createStars();
        populateDays();
    </script>
</body>
</html>